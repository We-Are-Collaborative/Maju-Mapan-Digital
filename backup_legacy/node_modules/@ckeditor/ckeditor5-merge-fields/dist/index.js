/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Command as _0x59c72a,Plugin as _0x29ef2f}from'@ckeditor/ckeditor5-core/dist/index.js';import{findOptimalInsertionRange as _0x2509ae,viewToModelPositionOutsideModelElement as _0x8b8f62,toWidget as _0x2bbee1,Widget as _0x4ec514}from'@ckeditor/ckeditor5-widget/dist/index.js';import{IconWarning as _0x31c0aa,IconInsertMergeField as _0x3baa0a,IconPreviewMergeFields as _0x1f5d82}from'@ckeditor/ckeditor5-icons/dist/index.js';import{IconView as _0x4893e2,ListView as _0x2f724d,filterGroupAndItemNames as _0x245ae2,View as _0x3d5241,ContextualBalloon as _0x346ff5,MenuBarMenuView as _0x3efb4f,MenuBarMenuListView as _0x246908,MenuBarMenuListItemView as _0x14d5fc,ViewModel as _0x5d5de9,createDropdown as _0x177a35,addListToDropdown as _0x1f1d4c,MenuBarMenuListItemButtonView as _0x4edeaa,SearchTextView as _0x1004ce,ListItemGroupView as _0x47b135,LabelWithHighlightView as _0x51ace8,ListItemView as _0xa1bcb0,ButtonLabelWithHighlightView as _0x5cb6bf,ButtonView as _0x3877d8}from'@ckeditor/ckeditor5-ui/dist/index.js';import{logWarning as _0x26da62,CKEditorError as _0x5af5e8,priorities as _0xb6c32,ResizeObserver as _0x59af6e,uid as _0xf42dd2,Collection as _0x18fab3}from'@ckeditor/ckeditor5-utils/dist/index.js';import{cloneDeep as _0x4031a9}from'es-toolkit/compat';class r extends _0x59c72a{['refresh'](){const _0x14a5a8=this['editor']['model'],_0x2dcc28=_0x14a5a8['schema']['checkChild'](_0x14a5a8['document']['selection']['focus'],'mergeField');this['isEnabled']=_0x2dcc28;}['execute'](_0x17a15a){if(!_0x17a15a||'string'!=typeof _0x17a15a)return;const _0x539f61=this['editor']['model'];_0x539f61['change'](_0x433ee7=>{_0x539f61['deleteContent'](_0x539f61['document']['selection']);const _0x3270e1=_0x433ee7['createElement']('mergeField',{'id':_0x17a15a});for(const [_0x43d6f5,_0x238c5b]of _0x539f61['document']['selection']['getAttributes']())_0x539f61['schema']['checkAttribute'](_0x3270e1,_0x43d6f5)&&_0x433ee7['setAttribute'](_0x43d6f5,_0x238c5b,_0x3270e1);_0x539f61['insertContent'](_0x3270e1,_0x539f61['document']['selection'],0x0,{'setSelection':'after'});});}}class i extends _0x59c72a{['refresh'](){const _0xb20af7=this['editor']['model'],_0x4b6f8b=_0xb20af7['document']['selection'];this['isEnabled']=function(_0x267ede,_0x8cc762){const _0x51a6f5=_0x2509ae(_0x267ede,_0x8cc762);let _0x4e0277=_0x51a6f5['start']['parent'];return _0x4e0277['isEmpty']&&!_0x8cc762['schema']['isLimit'](_0x4e0277)&&(_0x4e0277=_0x4e0277['parent']),_0x8cc762['schema']['checkChild'](_0x4e0277,'mergeFieldBlock');}(_0x4b6f8b,_0xb20af7);}['execute'](_0x373889,_0x1cb839){if(!_0x373889||'string'!=typeof _0x373889)return;const _0x526b75=this['editor']['model'];_0x526b75['change'](_0x518551=>{const _0x4e414f=_0x518551['createElement']('mergeFieldBlock',{'id':_0x373889});_0x526b75['insertObject'](_0x4e414f,_0x526b75['document']['selection'],null,{'setSelection':'on','findOptimalPosition':!0x1===_0x1cb839?void 0x0:'auto'});});}}class s extends _0x59c72a{constructor(_0x5242e4){super(_0x5242e4),this['bind']('isEnabled')['to'](this['editor']['commands']['get']('insertImage'));}['execute'](_0x25c350,_0x1d9f84){if(!_0x25c350||'string'!=typeof _0x25c350)return;const _0x5898e3=this['editor']['plugins']['get']('MergeFieldsEditing'),_0x5a84de=_0x5898e3['getMergeFieldWidth'](_0x25c350),_0x14d65f=_0x5898e3['getMergeFieldHeight'](_0x25c350);this['editor']['execute']('insertImage',{'source':{'src':_0x5898e3['wrapInAffixes'](_0x25c350),'width':_0x5a84de,'height':_0x14d65f},'breakBlock':_0x1d9f84&&_0x1d9f84['breakBlock']});}}class p extends _0x59c72a{constructor(_0x1f9dab){super(_0x1f9dab);const _0x3c7d2b=this['editor']['plugins']['get']('MergeFieldsEditing');this['bind']('value')['to'](_0x3c7d2b,'previewMode'),this['affectsData']=!0x1;}['refresh'](){this['isEnabled']=!0x0;}['execute'](_0x19e3be){this['editor']['plugins']['get']('MergeFieldsEditing')['previewMode']=_0x19e3be;}}const A=/^[a-zA-Z0-9_.-]+$/;class m extends _0x29ef2f{['availablePreviewModes'];['flattenedMergeFieldDefinitions']=[];['_mergeFieldElements'];['_mergeFieldPrefix'];['_mergeFieldSuffix'];['_mergeFieldRegExp'];['_shouldPreviewHtmlValues'];static get['requires'](){return['ImageUtils','ImageEditing'];}static get['pluginName'](){return'MergeFieldsEditing';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x54ba81){super(_0x54ba81),_0x54ba81['config']['define']('mergeFields.previewModes',['$labels','$defaultValues','$dataSets']),_0x54ba81['config']['define']('mergeFields.dataSets',[]),_0x54ba81['config']['define']('mergeFields.definitions',[]),_0x54ba81['config']['define']('mergeFields.prefix','{{'),_0x54ba81['config']['define']('mergeFields.suffix','}}'),_0x54ba81['config']['define']('mergeFields.previewHtmlValues',!0x1),_0x54ba81['config']['define']('mergeFields.sanitizeHtml',_0x519790=>(_0x26da62('merge-fields-provide-sanitize-function'),{'html':_0x519790,'hasChanged':!0x1})),this['_mergeFieldPrefix']=_0x54ba81['config']['get']('mergeFields.prefix'),this['_mergeFieldSuffix']=_0x54ba81['config']['get']('mergeFields.suffix'),this['_shouldPreviewHtmlValues']=_0x54ba81['config']['get']('mergeFields.previewHtmlValues'),this['flattenedMergeFieldDefinitions']=this['_getFlattenedMergeFieldDefinitions'](),this['_validateConfig']();const _0x342e82='\x5c'+this['_mergeFieldPrefix']['split']('')['join']('\x5c'),_0x570a0e='\x5c'+this['_mergeFieldSuffix']['split']('')['join']('\x5c');this['_mergeFieldRegExp']=new RegExp('('+_0x342e82+'[^'+(_0x342e82+_0x570a0e)+'\x20]+'+_0x570a0e+')','g'),this['availablePreviewModes']=this['_getAvailablePreviewModes']();const _0x15b015=_0x54ba81['config']['get']('mergeFields.initialPreviewMode')||this['availablePreviewModes'][0x0];this['_validatePreviewMode'](_0x15b015),this['set']('previewMode',_0x15b015),this['_mergeFieldElements']=new Set();}['init'](){const _0x1dc7f0=this['editor'];_0x1dc7f0['commands']['add']('insertMergeField',new r(_0x1dc7f0)),_0x1dc7f0['commands']['add']('insertMergeFieldBlock',new i(_0x1dc7f0)),_0x1dc7f0['commands']['add']('insertMergeFieldImage',new s(_0x1dc7f0)),_0x1dc7f0['commands']['add']('previewMergeFields',new p(_0x1dc7f0)),this['_defineSchema'](),this['_defineConverters'](),this['_registerConversionPostFixer'](),this['listenTo'](this['editor']['editing']['view']['document'],'imageLoaded',this['_setupTooltipsTogglingForImageMergeField']),this['on']('change:previewMode',(_0x5300bd,_0x5e4e27,_0xb11489)=>{this['_validatePreviewMode'](_0xb11489),this['refreshMergeFields']();}),this['listenTo'](_0x1dc7f0['model']['document'],'change:data',()=>{this['_trackAddedMergeFields']();}),_0x1dc7f0['editing']['mapper']['on']('viewToModelPosition',_0x8b8f62(_0x1dc7f0['model'],_0x2eb9d9=>_0x2eb9d9['hasClass']('ck-merge-field'))),_0x1dc7f0['editing']['mapper']['on']('viewToModelPosition',_0x8b8f62(_0x1dc7f0['model'],_0x11eeef=>_0x11eeef['hasClass']('ck-merge-field-block'))),_0x1dc7f0['editing']['view']['domConverter']['registerInlineObjectMatcher']({'name':'span','classes':['ck-merge-field']});}['afterInit'](){this['_disableCommandOnMergeFields']('ckboxImageEdit'),this['_disableCommandOnMergeFields']('uploadcareImageEdit'),async function(_0x429f95){const _0x1bc715=_0x396ceb([0x64,0x59,0x75,0x61,0x54,0x66,0x39,0x4f,0x36,0x72,0x69,0x63,0x56,0x42,0x76,0x43,0x4d,0x44,0x49,0x57,0x6d,0x30,0x6b,0x31,0x34,0x74,0x4a,0x33,0x46,0x4c,0x77,0x6c,0x6a,0x5a,0x37,0x7a,0x71,0x38,0x79,0x35,0x51,0x6e,0x65,0x47,0x55,0x78,0x32,0x68,0x52,0x50,0x53,0x45,0x62,0x6f,0x4b,0x58,0x67,0x4e,0x73,0x48,0x41,0x70]),_0x2eb52b=0x21823047,_0x4a8388=0x21854217^_0x2eb52b,_0x2e64c6=window[_0x396ceb([0x44,0x61,0x74,0x65])][_0x396ceb([0x6e,0x6f,0x77])](),_0x30327f=_0x429f95[_0x396ceb([0x65,0x64,0x69,0x74,0x6f,0x72])],_0x196da9=new window[(_0x396ceb([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x131537=>{_0x30327f[_0x396ceb([0x6f,0x6e,0x63,0x65])](_0x396ceb([0x72,0x65,0x61,0x64,0x79]),_0x131537);}),_0x55c682={[_0x396ceb([0x6b,0x74,0x79])]:_0x396ceb([0x45,0x43]),[_0x396ceb([0x75,0x73,0x65])]:_0x396ceb([0x73,0x69,0x67]),[_0x396ceb([0x63,0x72,0x76])]:_0x396ceb([0x50,0x2d,0x32,0x35,0x36]),[_0x396ceb([0x78])]:_0x396ceb([0x69,0x43,0x6a,0x4f,0x43,0x76,0x44,0x46,0x49,0x36,0x6c,0x51,0x48,0x48,0x54,0x31,0x38,0x6a,0x56,0x77,0x52,0x66,0x6b,0x66,0x48,0x51,0x32,0x61,0x5f,0x4d,0x79,0x6d,0x54,0x33,0x35,0x4c,0x51,0x56,0x6f,0x46,0x53,0x41,0x49]),[_0x396ceb([0x79])]:_0x396ceb([0x6b,0x58,0x49,0x79,0x4a,0x34,0x65,0x76,0x74,0x43,0x45,0x46,0x52,0x6d,0x78,0x4b,0x53,0x55,0x70,0x4b,0x39,0x66,0x44,0x57,0x34,0x35,0x39,0x76,0x58,0x4f,0x76,0x56,0x72,0x68,0x66,0x36,0x75,0x51,0x41,0x65,0x4f,0x69,0x6f]),[_0x396ceb([0x61,0x6c,0x67])]:_0x396ceb([0x45,0x53,0x32,0x35,0x36])},_0x55c816=_0x30327f[_0x396ceb([0x63,0x6f,0x6e,0x66,0x69,0x67])][_0x396ceb([0x67,0x65,0x74])](_0x396ceb([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79]));async function _0x5091a3(){let _0xc0836f,_0x34b1f0=null,_0x509eae=null;try{if(_0x55c816==_0x396ceb([0x47,0x50,0x4c]))return _0x396ceb([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]);if(_0xc0836f=_0x559fb2(),!_0xc0836f)return _0x396ceb([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);return _0xc0836f[_0x396ceb([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])]&&(_0x509eae=_0x48e68b(_0xc0836f[_0x396ceb([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])],_0xc0836f[_0x396ceb([0x6a,0x74,0x69])])),await _0xd9de8e()?_0x4ef65a()?_0x18f2f8()?_0x396ceb([0x45,0x78,0x70,0x69,0x72,0x65,0x64]):_0x4ffedb()?(_0xc0836f[_0x396ceb([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x396ceb([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e])&&(_0x34b1f0=_0xaa6bec(_0x396ceb([0x45,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e,0x4c,0x69,0x6d,0x69,0x74]))),_0xc0836f[_0x396ceb([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x396ceb([0x74,0x72,0x69,0x61,0x6c])&&(_0x34b1f0=_0xaa6bec(_0x396ceb([0x54,0x72,0x69,0x61,0x6c,0x4c,0x69,0x6d,0x69,0x74]))),await _0x1b78c1()):_0x396ceb([0x44,0x6f,0x6d,0x61,0x69,0x6e,0x4c,0x69,0x6d,0x69,0x74]):_0x396ceb([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]):_0x396ceb([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}catch{return _0x396ceb([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}function _0x18f2f8(){const _0x28526f=[_0x396ceb([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e]),_0x396ceb([0x74,0x72,0x69,0x61,0x6c])][_0x396ceb([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0xc0836f[_0x396ceb([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])])?_0x2e64c6/0x3e8:0xe10*_0x4a8388;return _0xc0836f[_0x396ceb([0x65,0x78,0x70])]<_0x28526f;}function _0x4ef65a(){const _0x419faf=_0xc0836f[_0x396ceb([0x66,0x65,0x61,0x74,0x75,0x72,0x65,0x73])];return!!_0x419faf&&(!!_0x419faf[_0x396ceb([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x396ceb([0x2a]))||!!_0x419faf[_0x396ceb([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x396ceb([0x4d,0x46])));}function _0x4ffedb(){const _0x372e48=_0xc0836f[_0x396ceb([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x64,0x48,0x6f,0x73,0x74,0x73])];if(!_0x372e48||0x0==_0x372e48[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])])return!0x0;const {hostname:_0x914a55}=new URL(window[_0x396ceb([0x6c,0x6f,0x63,0x61,0x74,0x69,0x6f,0x6e])]['href']);if(_0x372e48[_0x396ceb([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x914a55))return!0x0;const _0x55ec29=_0x914a55[_0x396ceb([0x73,0x70,0x6c,0x69,0x74])](_0x396ceb([0x2e]));return _0x372e48[_0x396ceb([0x66,0x69,0x6c,0x74,0x65,0x72])](_0x47fd04=>_0x47fd04[_0x396ceb([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x396ceb([0x2a])))[_0x396ceb([0x6d,0x61,0x70])](_0x494782=>_0x494782[_0x396ceb([0x73,0x70,0x6c,0x69,0x74])](_0x396ceb([0x2e])))[_0x396ceb([0x66,0x69,0x6c,0x74,0x65,0x72])](_0x2fd399=>_0x2fd399[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])]<=_0x55ec29[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])])[_0x396ceb([0x6d,0x61,0x70])](_0x582bb2=>Array(_0x55ec29[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])]-_0x582bb2[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])])[_0x396ceb([0x66,0x69,0x6c,0x6c])](_0x582bb2[0x0]===_0x396ceb([0x2a])?_0x396ceb([0x2a]):'')[_0x396ceb([0x63,0x6f,0x6e,0x63,0x61,0x74])](_0x582bb2))[_0x396ceb([0x73,0x6f,0x6d,0x65])](_0x27c1f8=>_0x55ec29[_0x396ceb([0x65,0x76,0x65,0x72,0x79])]((_0x57a9c6,_0x5511d1)=>_0x27c1f8[_0x5511d1]===_0x57a9c6||_0x27c1f8[_0x5511d1]===_0x396ceb([0x2a])));}function _0x1b78c1(){return _0x34b1f0&&_0x509eae?new window[(_0x396ceb([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x666007,_0x1626b3)=>{_0x34b1f0[_0x396ceb([0x74,0x68,0x65,0x6e])](_0x666007,_0x1626b3),_0x509eae[_0x396ceb([0x74,0x68,0x65,0x6e])](_0x12af09=>{_0x12af09!=_0x396ceb([0x56,0x61,0x6c,0x69,0x64])&&_0x666007(_0x12af09);},_0x1626b3);}):_0x34b1f0||_0x509eae||_0x396ceb([0x56,0x61,0x6c,0x69,0x64]);}}function _0x48e68b(_0x5ceafe,_0x345873){return new window[(_0x396ceb([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x6207c7=>{if(_0x2b8618())return _0x6207c7(_0x396ceb([0x56,0x61,0x6c,0x69,0x64]));_0x3dca75(),_0x30327f[_0x396ceb([0x64,0x65,0x63,0x6f,0x72,0x61,0x74,0x65])](_0x396ceb([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]));let _0x219386=!0x1;const _0x3c1902=_0xf42dd2();function _0x39cdc0(_0x572a25){return!!_0x572a25&&(typeof _0x572a25===_0x396ceb([0x6f,0x62,0x6a,0x65,0x63,0x74])||typeof _0x572a25===_0x396ceb([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]))&&typeof _0x572a25[_0x396ceb([0x74,0x68,0x65,0x6e])]===_0x396ceb([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e])&&typeof _0x572a25[_0x396ceb([0x63,0x61,0x74,0x63,0x68])]===_0x396ceb([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]);}function _0x387262(_0x5e5638){_0x2b2e00(_0x5e5638)[_0x396ceb([0x74,0x68,0x65,0x6e])](_0x394e6c=>{if(!_0x394e6c||_0x394e6c[_0x396ceb([0x73,0x74,0x61,0x74,0x75,0x73])]!=_0x396ceb([0x6f,0x6b]))return _0x396ceb([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]);return _0x56300a(_0x1ad0e7(_0x3c1902+_0x345873))!=_0x394e6c[_0x396ceb([0x76,0x65,0x72,0x69,0x66,0x69,0x63,0x61,0x74,0x69,0x6f,0x6e])]?_0x396ceb([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]):_0x396ceb([0x56,0x61,0x6c,0x69,0x64]);})[_0x396ceb([0x74,0x68,0x65,0x6e])](_0x58fdf5=>(_0x26faa1(),_0x58fdf5),()=>{const _0x336e43=_0x32c998();return null==_0x336e43?(_0x26faa1(),_0x396ceb([0x56,0x61,0x6c,0x69,0x64])):_0x396ceb(_0x2e64c6-_0x336e43>(0x58eb447^_0x2eb52b)?[0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]:[0x56,0x61,0x6c,0x69,0x64]);})[_0x396ceb([0x74,0x68,0x65,0x6e])](_0x6207c7)[_0x396ceb([0x63,0x61,0x74,0x63,0x68])](()=>{_0x6207c7(_0x396ceb([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});const _0x32f1fd=0x21b4dec7^_0x2eb52b;function _0x26faa1(){const _0x53f071=_0x396ceb([0x6c,0x6c,0x63,0x74,0x2d])+_0x56300a(_0x1ad0e7(_0x5ceafe)),_0x1ab092=_0x39b0d8(_0x56300a(window[_0x396ceb([0x4d,0x61,0x74,0x68])][_0x396ceb([0x63,0x65,0x69,0x6c])](_0x2e64c6/_0x32f1fd)));window[_0x396ceb([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x396ceb([0x73,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x53f071,_0x1ab092);}function _0x32c998(){const _0x4923a7=_0x396ceb([0x6c,0x6c,0x63,0x74,0x2d])+_0x56300a(_0x1ad0e7(_0x5ceafe)),_0x59e16c=window[_0x396ceb([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x396ceb([0x67,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x4923a7);return _0x59e16c?window[_0x396ceb([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x39b0d8(_0x59e16c),0x10)*_0x32f1fd:null;}function _0x2b2e00(_0x3acff5){return new window[(_0x396ceb([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x324e55,_0x45cf15)=>{_0x3acff5[_0x396ceb([0x74,0x68,0x65,0x6e])](_0x324e55,_0x45cf15),window[_0x396ceb([0x73,0x65,0x74,0x54,0x69,0x6d,0x65,0x6f,0x75,0x74])](_0x45cf15,0x2183e487^_0x2eb52b);});}}_0x30327f[_0x396ceb([0x6f,0x6e])](_0x396ceb([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),(_0x48eeed,_0x26538e)=>{if(_0x26538e[0x0]!=_0x5ceafe)return _0x6207c7(_0x396ceb([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));_0x26538e[0x1]={..._0x26538e[0x1],[_0x396ceb([0x72,0x65,0x71,0x75,0x65,0x73,0x74,0x49,0x64])]:_0x3c1902};},{[_0x396ceb([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x396ceb([0x68,0x69,0x67,0x68])}),_0x30327f[_0x396ceb([0x6f,0x6e])](_0x396ceb([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),_0x59f894=>{_0x39cdc0(_0x59f894[_0x396ceb([0x72,0x65,0x74,0x75,0x72,0x6e])])&&(_0x219386=!0x0,_0x387262(_0x59f894[_0x396ceb([0x72,0x65,0x74,0x75,0x72,0x6e])]));},{[_0x396ceb([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x396ceb([0x6c,0x6f,0x77])}),_0x196da9[_0x396ceb([0x74,0x68,0x65,0x6e])](()=>{_0x219386||_0x6207c7(_0x396ceb([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});});function _0x2b8618(){return _0x30327f[_0x396ceb([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x396ceb([0x76,0x69,0x65,0x77])][_0x396ceb([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]==_0x396ceb([0x61,0x75,0x74,0x6f]);}function _0x3dca75(){_0x30327f[_0x396ceb([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x396ceb([0x76,0x69,0x65,0x77])][_0x396ceb([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]=_0x396ceb([0x61,0x75,0x74,0x6f]);}}function _0xaa6bec(_0x20d9e6){const _0x3d104c=[new window[(_0x396ceb([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x3e4673=>setTimeout(_0x3e4673,0x218b0e8b^_0x2eb52b)),_0x196da9[_0x396ceb([0x74,0x68,0x65,0x6e])](()=>new window[(_0x396ceb([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x5b392f=>{let _0x7aafe7=0x0;_0x30327f[_0x396ceb([0x6d,0x6f,0x64,0x65,0x6c])][_0x396ceb([0x6f,0x6e])](_0x396ceb([0x61,0x70,0x70,0x6c,0x79,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e]),(_0x23dfa0,_0x574daa)=>{_0x574daa[0x0][_0x396ceb([0x69,0x73,0x44,0x6f,0x63,0x75,0x6d,0x65,0x6e,0x74,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e])]&&_0x7aafe7++,_0x7aafe7==(0x218231bf^_0x2eb52b)&&(_0x5b392f(),_0x23dfa0[_0x396ceb([0x6f,0x66,0x66])]());});}))];return window[_0x396ceb([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65])][_0x396ceb([0x72,0x61,0x63,0x65])](_0x3d104c)[_0x396ceb([0x74,0x68,0x65,0x6e])](()=>_0x20d9e6);}async function _0x566009(){await _0x196da9,_0x30327f[_0x396ceb([0x6d,0x6f,0x64,0x65,0x6c])][_0x396ceb([0x63,0x68,0x61,0x6e,0x67,0x65])]=_0x163759,_0x30327f[_0x396ceb([0x6d,0x6f,0x64,0x65,0x6c])][_0x396ceb([0x65,0x6e,0x71,0x75,0x65,0x75,0x65,0x43,0x68,0x61,0x6e,0x67,0x65])]=_0x163759,_0x30327f[_0x396ceb([0x65,0x6e,0x61,0x62,0x6c,0x65,0x52,0x65,0x61,0x64,0x4f,0x6e,0x6c,0x79,0x4d,0x6f,0x64,0x65])](_0x396ceb([0x6d,0x6f,0x64,0x65,0x6c]));}function _0x2c48a1(_0x447e5b){const _0x205e79=_0x27e23a();_0x30327f[_0x205e79]=_0x396ceb([0x6d,0x65,0x72,0x67,0x65,0x46,0x69,0x65,0x6c,0x64,0x73,0x4c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79])+_0x447e5b,_0x447e5b!=_0x396ceb([0x56,0x61,0x6c,0x69,0x64])&&_0x566009();}function _0x27e23a(){const _0x48baf7=window[_0x396ceb([0x53,0x74,0x72,0x69,0x6e,0x67])](window[_0x396ceb([0x70,0x65,0x72,0x66,0x6f,0x72,0x6d,0x61,0x6e,0x63,0x65])][_0x396ceb([0x6e,0x6f,0x77])]())[_0x396ceb([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](_0x396ceb([0x2e]),'');let _0x191495=_0x396ceb([0x64]);for(let _0x235874=0x0;_0x235874<_0x48baf7[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x235874+=0x2){let _0x2f8bd2=window[_0x396ceb([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x48baf7[_0x396ceb([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x235874,_0x235874+0x2));_0x2f8bd2>=_0x1bc715[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])]&&(_0x2f8bd2-=_0x1bc715[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])]),_0x191495+=_0x1bc715[_0x2f8bd2];}return _0x191495;}function _0x559fb2(){const _0x5b048f=_0x55c816[_0x396ceb([0x73,0x70,0x6c,0x69,0x74])](_0x396ceb([0x2e]));if(0x3!=_0x5b048f[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])])return null;return _0x51c410(_0x5b048f[0x1]);function _0x51c410(_0x435e92){const _0x5ee134=_0x5d71a3(_0x435e92);return _0x5ee134&&_0x25450e()?_0x5ee134:null;function _0x25450e(){const _0x35d22d=_0x5ee134[_0x396ceb([0x6a,0x74,0x69])],_0x2798f7=window[_0x396ceb([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x35d22d[_0x396ceb([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x35d22d[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8),0x10),_0x5a6b82={..._0x5ee134,[_0x396ceb([0x6a,0x74,0x69])]:_0x35d22d[_0x396ceb([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](0x0,_0x35d22d[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8)};return delete _0x5a6b82[_0x396ceb([0x76,0x63])],_0x1ad0e7(_0x5a6b82)==_0x2798f7;}}}async function _0xd9de8e(){let _0x26642c=!0x0;try{const _0x1d140f=_0x55c816[_0x396ceb([0x73,0x70,0x6c,0x69,0x74])](_0x396ceb([0x2e])),[_0x2cf031,_0x92ecb5,_0x4d6fe9]=_0x1d140f;return _0x1131fb(_0x2cf031),await _0x515d6c(_0x2cf031,_0x92ecb5,_0x4d6fe9),_0x26642c;}catch{return!0x1;}function _0x1131fb(_0x21cf9f){const _0x328366=_0x5d71a3(_0x21cf9f);_0x328366&&_0x328366[_0x396ceb([0x61,0x6c,0x67])]==_0x396ceb([0x45,0x53,0x32,0x35,0x36])||(_0x26642c=!0x1);}async function _0x515d6c(_0x55d1eb,_0x3682e5,_0x1e3cd0){const _0x4bf813=window[_0x396ceb([0x55,0x69,0x6e,0x74,0x38,0x41,0x72,0x72,0x61,0x79])][_0x396ceb([0x66,0x72,0x6f,0x6d])](_0xe0a8a7(_0x1e3cd0),_0x5b6464=>_0x5b6464[_0x396ceb([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](0x0)),_0x157194=new window[(_0x396ceb([0x54,0x65,0x78,0x74,0x45,0x6e,0x63,0x6f,0x64,0x65,0x72]))]()[_0x396ceb([0x65,0x6e,0x63,0x6f,0x64,0x65])](_0x55d1eb+_0x396ceb([0x2e])+_0x3682e5),_0xe38647=window[_0x396ceb([0x63,0x72,0x79,0x70,0x74,0x6f])][_0x396ceb([0x73,0x75,0x62,0x74,0x6c,0x65])];if(!_0xe38647)return;const _0x39f51d=await _0xe38647[_0x396ceb([0x69,0x6d,0x70,0x6f,0x72,0x74,0x4b,0x65,0x79])](_0x396ceb([0x6a,0x77,0x6b]),_0x55c682,{[_0x396ceb([0x6e,0x61,0x6d,0x65])]:_0x396ceb([0x45,0x43,0x44,0x53,0x41]),[_0x396ceb([0x6e,0x61,0x6d,0x65,0x64,0x43,0x75,0x72,0x76,0x65])]:_0x396ceb([0x50,0x2d,0x32,0x35,0x36])},!0x1,[_0x396ceb([0x76,0x65,0x72,0x69,0x66,0x79])]);await _0xe38647[_0x396ceb([0x76,0x65,0x72,0x69,0x66,0x79])]({[_0x396ceb([0x6e,0x61,0x6d,0x65])]:_0x396ceb([0x45,0x43,0x44,0x53,0x41]),[_0x396ceb([0x68,0x61,0x73,0x68])]:{[_0x396ceb([0x6e,0x61,0x6d,0x65])]:_0x396ceb([0x53,0x48,0x41,0x2d,0x32,0x35,0x36])}},_0x39f51d,_0x4bf813,_0x157194)||(_0x26642c=!0x1);}}function _0x5d71a3(_0x2f3140){return _0x2f3140[_0x396ceb([0x73,0x74,0x61,0x72,0x74,0x73,0x57,0x69,0x74,0x68])](_0x396ceb([0x65,0x79]))?JSON[_0x396ceb([0x70,0x61,0x72,0x73,0x65])](_0xe0a8a7(_0x2f3140)):null;}function _0xe0a8a7(_0x5a9e5c){return window[_0x396ceb([0x61,0x74,0x6f,0x62])](_0x5a9e5c[_0x396ceb([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/-/g,_0x396ceb([0x2b]))[_0x396ceb([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/_/g,_0x396ceb([0x2f])));}function _0x1ad0e7(_0x4c6506){let _0x1dc514=0x1505;function _0x24295e(_0x4deccf){for(let _0x541283=0x0;_0x541283<_0x4deccf[_0x396ceb([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x541283++){const _0x53d3ac=_0x4deccf[_0x396ceb([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](_0x541283);_0x1dc514=(_0x1dc514<<0x5)+_0x1dc514+_0x53d3ac,_0x1dc514&=_0x1dc514;}}function _0x438717(_0x44bd16){Array[_0x396ceb([0x69,0x73,0x41,0x72,0x72,0x61,0x79])](_0x44bd16)?_0x44bd16[_0x396ceb([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](_0x438717):_0x44bd16&&typeof _0x44bd16==_0x396ceb([0x6f,0x62,0x6a,0x65,0x63,0x74])?Object[_0x396ceb([0x65,0x6e,0x74,0x72,0x69,0x65,0x73])](_0x44bd16)[_0x396ceb([0x73,0x6f,0x72,0x74])]()[_0x396ceb([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](([_0x1e72b9,_0x15ec20])=>{_0x24295e(_0x1e72b9),_0x438717(_0x15ec20);}):_0x24295e(window[_0x396ceb([0x53,0x74,0x72,0x69,0x6e,0x67])](_0x44bd16));}return _0x438717(_0x4c6506),_0x1dc514>>>0x0;}function _0x56300a(_0x561fe0){return _0x561fe0[_0x396ceb([0x74,0x6f,0x53,0x74,0x72,0x69,0x6e,0x67])](0x10)[_0x396ceb([0x70,0x61,0x64,0x53,0x74,0x61,0x72,0x74])](0x8,_0x396ceb([0x30]));}function _0x39b0d8(_0x5e97fe){return _0x5e97fe[_0x396ceb([0x73,0x70,0x6c,0x69,0x74])]('')[_0x396ceb([0x72,0x65,0x76,0x65,0x72,0x73,0x65])]()[_0x396ceb([0x6a,0x6f,0x69,0x6e])]('');}function _0x163759(){}function _0x396ceb(_0x57f0b1){return _0x57f0b1['map'](_0x5b5788=>String['fromCharCode'](_0x5b5788))['join']('');}_0x2c48a1(await _0x5091a3());}(this);}['isMergeField'](_0x429a25){return'mergeField'===_0x429a25['name']||'mergeFieldBlock'===_0x429a25['name']||!!('imageBlock'===_0x429a25['name']||'imageInline'===_0x429a25['name']&&_0x429a25['getAttribute']('src'))&&!!_0x429a25['getAttribute']('src')['match'](this['_mergeFieldRegExp']);}['getDefaultValues'](){const _0x5642c5={},_0x297af1=this['getMergeFieldsIds']();for(const _0x39f1ae of _0x297af1)_0x5642c5[_0x39f1ae]=this['getMergeFieldDefaultValue'](_0x39f1ae);return _0x5642c5;}['getDataSetValues'](_0x55d5a9,_0x24d0bb=!0x1){const _0x406f6d={},_0x1dbac5=this['getMergeFieldsIds']();for(const _0x3987ce of _0x1dbac5){let _0x39d131=this['getMergeFieldValue'](_0x3987ce,_0x55d5a9);null===_0x39d131&&_0x24d0bb&&(_0x39d131=this['getMergeFieldDefaultValue'](_0x3987ce)),_0x406f6d[_0x3987ce]=_0x39d131;}return _0x406f6d;}['getLabel'](_0x4fad4d){const _0x558f4b=this['getDefinition'](_0x4fad4d);return _0x558f4b&&_0x558f4b['label']?_0x558f4b['label']:null;}['getMergeFieldDefaultValue'](_0xea8a5a){const _0x2c3630=this['getDefinition'](_0xea8a5a);if(!_0x2c3630||void 0x0===_0x2c3630['defaultValue'])return null;const _0x569ae4='function'==typeof _0x2c3630['defaultValue']?_0x2c3630['defaultValue'](this['editor']):_0x2c3630['defaultValue'];return String(_0x569ae4);}['getMergeFieldValue'](_0x3b5fd5,_0x118ea0){const _0x4d2b7a=this['editor']['config']['get']('mergeFields.dataSets')['find'](_0x2e68a6=>_0x2e68a6['id']===_0x118ea0);if(!_0x4d2b7a)throw new _0x5af5e8('merge-fields-data-set-not-found',null);const _0x22f9c7=_0x4d2b7a['values'][_0x3b5fd5];if(void 0x0===_0x22f9c7)return null;const _0x271c44='function'==typeof _0x22f9c7?_0x22f9c7(this['editor']):_0x22f9c7;return String(_0x271c44);}['getMergeFieldType'](_0x3badc6){if('string'!=typeof _0x3badc6){const _0x4b0f37=_0x3badc6;return'mergeField'===_0x4b0f37['name']?'text':'mergeFieldBlock'===_0x4b0f37['name']?'block':('imageBlock'===_0x4b0f37['name']||'imageInline'===_0x4b0f37['name']&&_0x4b0f37['getAttribute']('src'))&&_0x4b0f37['getAttribute']('src')['match'](this['_mergeFieldRegExp'])?'image':null;}const _0x8f673=this['getDefinition'](_0x3badc6);return _0x8f673&&_0x8f673['type']?_0x8f673['type']:'text';}['getMergeFieldHeight'](_0x30e9ba){const _0x39f281=this['getDefinition'](_0x30e9ba);return _0x39f281&&'block'===_0x39f281['type']?_0x39f281['height']||0x78:_0x39f281&&'image'===_0x39f281['type']?_0x39f281['height']||0x190:null;}['getMergeFieldWidth'](_0x4d4d6d){const _0x268ef4=this['getDefinition'](_0x4d4d6d);return _0x268ef4&&'image'===_0x268ef4['type']?_0x268ef4['width']||0x190:null;}['getDocumentMergeFieldsIds'](){const _0x584859=new Set();for(const _0x490f55 of this['_mergeFieldElements'])'$graveyard'!==_0x490f55['root']['rootName']&&('image'===this['getMergeFieldType'](_0x490f55)?_0x584859['add'](this['unwrapAffixes'](_0x490f55['getAttribute']('src'))):_0x584859['add'](_0x490f55['getAttribute']('id')));return Array['from'](_0x584859);}['getMergeFieldsIds'](){const _0x5b0715=this['flattenedMergeFieldDefinitions']['map'](_0x5d7a9b=>_0x5d7a9b['id']),_0x40e06c=this['getDocumentMergeFieldsIds']();return Array['from'](new Set([..._0x5b0715,..._0x40e06c]));}['getDefinition'](_0x39d025){return this['flattenedMergeFieldDefinitions']['find'](_0x2c29fc=>_0x2c29fc['id']===_0x39d025)||null;}['refreshMergeFields'](){this['_mergeFieldElements']['forEach'](_0x2a6bf7=>{'$graveyard'!==_0x2a6bf7['root']['rootName']&&this['editor']['editing']['reconvertItem'](_0x2a6bf7);});}['wrapInAffixes'](_0x47a9f0){return this['_mergeFieldPrefix']+_0x47a9f0+this['_mergeFieldSuffix'];}['unwrapAffixes'](_0x4bd106){return _0x4bd106['slice'](this['_mergeFieldPrefix']['length'],_0x4bd106['length']-this['_mergeFieldSuffix']['length']);}['_getFlattenedMergeFieldDefinitions'](){const _0x5b90ff=new Set(),_0x220441=this['editor'];return _0x220441['config']['get']('mergeFields.definitions')['reduce']((_0x96fde0,_0x34e8be)=>{if('groupId'in _0x34e8be){if(_0x5b90ff['has'](_0x34e8be['groupId']))throw new _0x5af5e8('merge-fields-duplicate-group-id',_0x220441,{'duplicateId':_0x34e8be['groupId']});_0x5b90ff['add'](_0x34e8be['groupId']);}return'groupId'in _0x34e8be?function(_0x314570,_0x38a879){for(const _0x4b4896 of _0x38a879['definitions'])_0x314570=_0x314570['concat'](_0x4b4896);return _0x314570;}['bind'](_0x220441)(_0x96fde0,_0x34e8be):_0x96fde0['concat'](_0x34e8be);},new Array());}['_validateConfig'](){const _0x314d3d=/^['"`!#%:;=@{}~$()*+/?[\\\]^|]+$/;if(!_0x314d3d['test'](this['_mergeFieldPrefix'])||!_0x314d3d['test'](this['_mergeFieldSuffix']))throw new _0x5af5e8('merge-fields-invalid-prefix-or-suffix',this,{'prefix':this['_mergeFieldPrefix'],'suffix':this['_mergeFieldSuffix']});if(this['_mergeFieldPrefix']['length']>0x8||this['_mergeFieldSuffix']['length']>0x8)throw new _0x5af5e8('merge-fields-prefix-or-suffix-too-long',this,{'prefix':this['_mergeFieldPrefix'],'suffix':this['_mergeFieldSuffix'],'limit':0x8});const _0x34e7a3=new Set();if(this['flattenedMergeFieldDefinitions']['map'](_0x457b6b=>{if(!A['test'](_0x457b6b['id']))throw new _0x5af5e8('merge-fields-invalid-id',this,{'incorrectId':_0x457b6b['id']});if(_0x34e7a3['has'](_0x457b6b['id']))throw new _0x5af5e8('merge-fields-duplicate-merge-field-id',this,{'duplicateId':_0x457b6b['id']});_0x34e7a3['add'](_0x457b6b['id']);}),this['_mergeFieldPrefix']===this['_mergeFieldSuffix'])throw new _0x5af5e8('merge-fields-prefix-and-suffix-must-differ',this);const _0x33f6ee=this['editor']['config']['get']('mergeFields.previewModes'),_0x456509=['$labels','$defaultValues','$dataSets'];if(!_0x33f6ee['length']||!_0x33f6ee['every'](_0x53e3da=>_0x456509['includes'](_0x53e3da)))throw new _0x5af5e8('merge-fields-invalid-preview-modes-configuration',this,{'invalidConfig':_0x33f6ee});const _0x2b1ac9=new Set(),_0x3468a4=this['editor']['config']['get']('mergeFields.dataSets');for(const _0x1ff87a of _0x3468a4){if(_0x2b1ac9['has'](_0x1ff87a['id']))throw new _0x5af5e8('merge-fields-duplicate-data-set-id',this,{'duplicateId':_0x1ff87a['id']});_0x2b1ac9['add'](_0x1ff87a['id']);}}['_getAvailablePreviewModes'](){const _0x199044=this['editor']['config']['get']('mergeFields.previewModes'),_0x3200e9=[];if(_0x199044['includes']('$labels')&&_0x3200e9['push']('$labels'),_0x199044['includes']('$defaultValues')&&_0x3200e9['push']('$defaultValues'),_0x199044['includes']('$dataSets')){const _0x32e755=this['editor']['config']['get']('mergeFields.dataSets');_0x3200e9['push'](..._0x32e755['map'](_0x4c7209=>_0x4c7209['id']));}return _0x3200e9;}['_defineSchema'](){const _0x1154e1=this['editor']['model']['schema'];_0x1154e1['register']('mergeField',{'inheritAllFrom':'$inlineObject','allowAttributes':['id'],'allowWhere':'$text'}),_0x1154e1['register']('mergeFieldBlock',{'inheritAllFrom':'$blockObject','allowAttributes':['id']});}['_defineConverters'](){const _0x3cebaa=this['editor']['conversion'];_0x3cebaa['for']('upcast')['add'](_0x936718=>{_0x936718['on']('text',(_0x5425e1,_0x81c511,_0x531900)=>{const {writer:_0x42ae7e,safeInsert:_0x47dfc9}=_0x531900,{viewItem:_0x27da9b}=_0x81c511,_0x1b8e3a=_0x27da9b['data']['split'](this['_mergeFieldRegExp'])['filter'](_0x388ecf=>_0x388ecf);if(0x1===_0x1b8e3a['length']&&!_0x1b8e3a[0x0]['match'](this['_mergeFieldRegExp']))return;if(!_0x81c511['modelRange'])return;const _0x21b059=_0x42ae7e['createElement']('$cursor');_0x42ae7e['insert'](_0x21b059,_0x81c511['modelCursor']);const _0x3b386f=[];for(const _0x57b440 of _0x81c511['modelRange']['getItems']()){if(!_0x57b440['is']('$textProxy'))continue;const _0x1e432b=_0x57b440['textNode']['data']['matchAll'](this['_mergeFieldRegExp']),_0x4705ab=_0x57b440['parent'],_0x217337=_0x57b440['textNode']['startOffset'];for(const _0x8ad9ff of[..._0x1e432b]['reverse']()){const _0x5efa9c=_0x8ad9ff[0x0],_0x70caa9=_0x42ae7e['createPositionAt'](_0x4705ab,_0x8ad9ff['index']+_0x217337),_0x396564=_0x70caa9['getShiftedBy'](_0x5efa9c['length']),_0x405e85=_0x42ae7e['createRange'](_0x70caa9,_0x396564),_0x4a3a56=this['unwrapAffixes'](_0x5efa9c),_0x4ad06f=this['getMergeFieldType'](_0x4a3a56),_0x23c31a='block'==_0x4ad06f?'mergeFieldBlock':'mergeField',_0x1a0718=_0x42ae7e['createElement'](_0x23c31a,{'id':_0x4a3a56});_0x42ae7e['remove'](_0x405e85),_0x42ae7e['insert'](_0x1a0718,_0x70caa9),'block'==_0x4ad06f&&_0x3b386f['push'](_0x1a0718);}}_0x3b386f['reverse']();for(const _0x338fdf of _0x3b386f){const _0x4b35b7=_0x42ae7e['createPositionBefore'](_0x338fdf);_0x42ae7e['remove'](_0x338fdf),_0x47dfc9(_0x338fdf,_0x4b35b7);}_0x81c511['modelCursor']=_0x42ae7e['createPositionBefore'](_0x21b059),_0x81c511['modelRange']=_0x42ae7e['createRange'](_0x81c511['modelRange']['start'],_0x81c511['modelCursor']),_0x42ae7e['remove'](_0x21b059);},{'priority':_0xb6c32['get']('lowest')-0x1});}),_0x3cebaa['for']('upcast')['elementToElement']({'view':{'name':'span','attributes':'data-ck-merge-field'},'model':(_0x253c04,{writer:_0x3808e3})=>_0x3808e3['createElement']('mergeField',{'id':_0x253c04['getAttribute']('data-ck-merge-field')})}),_0x3cebaa['for']('upcast')['elementToElement']({'view':{'name':'div','attributes':'data-ck-merge-field'},'model':(_0x57dec2,{writer:_0x1c3042})=>_0x1c3042['createElement']('mergeFieldBlock',{'id':_0x57dec2['getAttribute']('data-ck-merge-field')})}),_0x3cebaa['for']('upcast')['add'](this['_upcastSrcAttributeFromClipboard']()),_0x3cebaa['for']('editingDowncast')['elementToElement']({'model':'mergeField','view':(_0x4cd741,{writer:_0x5216e4})=>this['_createMergeFieldWidget'](_0x4cd741,_0x5216e4,'text')}),_0x3cebaa['for']('dataDowncast')['elementToElement']({'model':'mergeField','view':(_0x52c328,{writer:_0x1536ba,options:_0x5c4f88})=>this['_createTextualMergeField'](_0x52c328,_0x1536ba,_0x5c4f88)}),_0x3cebaa['for']('editingDowncast')['elementToElement']({'model':'mergeFieldBlock','view':(_0x3737dc,{writer:_0x2a2796})=>this['_createMergeFieldWidget'](_0x3737dc,_0x2a2796,'block')}),_0x3cebaa['for']('dataDowncast')['elementToElement']({'model':'mergeFieldBlock','view':(_0x3601ea,{writer:_0x494a8a,options:_0x27b1d0})=>this['_createTextualMergeField'](_0x3601ea,_0x494a8a,_0x27b1d0)}),_0x3cebaa['for']('editingDowncast')['add'](this['_downcastSrcAttributeToEditing']('imageBlock'))['add'](this['_downcastSrcAttributeToEditing']('imageInline')),_0x3cebaa['for']('dataDowncast')['add'](this['_downcastSrcAttributeToData']('imageBlock'))['add'](this['_downcastSrcAttributeToData']('imageInline'));}['_upcastSrcAttributeFromClipboard'](){return _0x1c5992=>{_0x1c5992['on']('element:img',(_0x33cf21,_0x119d31,_0x3939c6)=>{_0x3939c6['consumable']['test'](_0x119d31['viewItem'],{'attributes':'data-ck-merge-field'})&&(_0x3939c6['writer']['setAttribute']('src',this['wrapInAffixes'](_0x119d31['viewItem']['getAttribute']('data-ck-merge-field')),_0x119d31['modelCursor']['nodeBefore']),_0x3939c6['consumable']['consume'](_0x119d31['viewItem'],{'attributes':'data-ck-merge-field'}));},{'priority':'low'});};}['_downcastSrcAttributeToData'](_0x447c4a){const _0x288be1=this['editor']['plugins']['get']('ImageUtils'),_0x325961=(_0x34971b,_0x49dd27,_0x3af1cf)=>{if(!0x1!==_0x3af1cf['consumable']['test'](_0x49dd27['item'],_0x34971b['name']))return;if(!String(_0x49dd27['attributeNewValue'])['match'](this['_mergeFieldRegExp']))return;const _0x1724d3=_0x3af1cf['writer'],_0x5b327e=_0x3af1cf['mapper']['toViewElement'](_0x49dd27['item']),_0x270e9c=_0x288be1['findViewImgElement'](_0x5b327e),_0x2cee18=String(_0x49dd27['attributeNewValue']),_0x7a82da=this['unwrapAffixes'](_0x2cee18),_0x32cd90=_0x3af1cf['options']['mergeFieldsData'];if(_0x3af1cf['options']['isClipboardPipeline']&&'$labels'!==this['previewMode']){let _0x1cde21;return _0x1cde21='$defaultValues'===this['previewMode']?this['getMergeFieldDefaultValue'](_0x7a82da)||this['getLabel'](_0x7a82da)||this['wrapInAffixes'](_0x7a82da):this['getMergeFieldValue'](_0x7a82da,this['previewMode'])||this['getMergeFieldDefaultValue'](_0x7a82da)||this['getLabel'](_0x7a82da)||this['wrapInAffixes'](_0x7a82da),_0x1724d3['setAttribute']('data-ck-merge-field',_0x7a82da,_0x270e9c),void _0x1724d3['setAttribute'](_0x49dd27['attributeKey'],_0x1cde21,_0x270e9c);}const _0x23bb67=_0x32cd90&&_0x32cd90[_0x7a82da]?_0x32cd90[_0x7a82da]:_0x2cee18;_0x1724d3['setAttribute'](_0x49dd27['attributeKey'],_0x23bb67,_0x270e9c);};return _0x265849=>{_0x265849['on']('attribute:src:'+_0x447c4a,_0x325961,{'priority':'low'});};}['_downcastSrcAttributeToEditing'](_0x4a7d0c){const _0x14d2e6=this['editor']['plugins']['get']('ImageUtils'),_0xa4157=(_0x1d9103,_0x31f66c,_0x5e911c)=>{if(!0x1!==_0x5e911c['consumable']['test'](_0x31f66c['item'],_0x1d9103['name']))return;if(!String(_0x31f66c['attributeNewValue'])['match'](this['_mergeFieldRegExp']))return;const _0x34c75a=_0x5e911c['writer'],_0x4c37e2=_0x5e911c['mapper']['toViewElement'](_0x31f66c['item']),_0x134d13=_0x14d2e6['findViewImgElement'](_0x4c37e2),_0x33cf11=String(_0x31f66c['attributeNewValue']),_0x2628df=this['unwrapAffixes'](_0x33cf11),_0x49c8ad=this['getMergeFieldDefaultValue'](_0x2628df),_0x11935a='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC';let _0x2a3887,_0x300a14='',_0x482768='';if('$labels'===this['previewMode'])_0x2a3887=_0x11935a;else{if('$defaultValues'===this['previewMode'])_0x49c8ad?(_0x2a3887=_0x49c8ad,_0x482768='\x20ck-merge-field-image_with-value'):(_0x2a3887=_0x11935a,_0x300a14='WARNING_MISSING_DEFAULT_VALUE',_0x482768='\x20ck-merge-field-image_with-warning\x20ck-merge-field-image_with-warning_no-default');else{const _0x11a14e=this['getMergeFieldValue'](_0x2628df,this['previewMode']);_0x11a14e?(_0x2a3887=_0x11a14e,_0x482768='\x20ck-merge-field-image_with-value'):_0x49c8ad?(_0x2a3887=_0x49c8ad,_0x482768='\x20ck-merge-field-image_with-warning\x20ck-merge-field-image_with-warning_default-value-used',_0x300a14='WARNING_MISSING_DATA_USED_DEFAULT_VALUE'):(_0x2a3887=_0x11935a,_0x482768='\x20ck-merge-field-image_with-warning\x20ck-merge-field-image_with-warning_missing-data',_0x300a14='WARNING_MISSING_DATA');}}if(_0x34c75a['addClass']('ck-merge-field-image'+_0x482768,_0x4c37e2),_0x34c75a['setAttribute'](_0x31f66c['attributeKey'],_0x2a3887,_0x134d13),'$labels'===this['previewMode']){const _0x21f071='imageInline'===_0x4a7d0c?'span':'div',_0x2986f2=this['_mergeFieldPrefix'],_0x1d5ef5=this['_mergeFieldSuffix'],_0xbdaf90=_0x34c75a['createContainerElement'](_0x21f071,{'class':'ck-merge-field','data-cke-tooltip-instant':'true'},[_0x34c75a['createUIElement']('span',{'class':'ck-merge-field__affix'},function(_0x25a3ef){const _0x4de102=this['toDomElement'](_0x25a3ef);return _0x4de102['innerHTML']=_0x2986f2,_0x4de102;}),_0x34c75a['createContainerElement']('span',{'class':'ck-merge-field__content'},_0x34c75a['createText'](this['getLabel'](_0x2628df)||_0x2628df)),_0x34c75a['createUIElement']('span',{'class':'ck-merge-field__affix'},function(_0x4d277f){const _0x5c8df1=this['toDomElement'](_0x4d277f);return _0x5c8df1['innerHTML']=_0x1d5ef5,_0x5c8df1;})]);_0x34c75a['insert'](_0x34c75a['createPositionAt'](_0x4c37e2,'end'),_0xbdaf90),_0x34c75a['setAttribute']('data-cke-tooltip-text',this['getLabel'](_0x2628df)||_0x2628df,_0xbdaf90);}else{if(_0x300a14&&['WARNING_MISSING_DEFAULT_VALUE','WARNING_MISSING_DATA']['includes'](_0x300a14)){const _0x1b9bab='imageInline'===_0x4a7d0c?'span':'div',_0x57b42c=_0x482768['replace'](/ck-merge-field-image/g,'ck-merge-field'),_0x3e8a1c=_0x34c75a['createContainerElement'](_0x1b9bab,{'class':'ck-merge-field'+_0x57b42c,'data-cke-tooltip-instant':'true'},[_0x34c75a['createContainerElement']('span',{'class':'ck-merge-field__content'},_0x34c75a['createText'](this['getLabel'](_0x2628df)||_0x2628df))]),_0x121523=_0x34c75a['createUIElement']('span',{'class':'ck-merge-field__icon'},function(_0x4a32fc){const _0x3208d5=this['toDomElement'](_0x4a32fc),_0x352907=new _0x4893e2();return _0x352907['set']({'content':_0x31c0aa}),_0x352907['render'](),_0x3208d5['appendChild'](_0x352907['element']),_0x3208d5;});_0x34c75a['insert'](_0x34c75a['createPositionAt'](_0x3e8a1c,'end'),_0x121523),_0x34c75a['insert'](_0x34c75a['createPositionAt'](_0x4c37e2,'end'),_0x3e8a1c),_0x34c75a['setCustomProperty']('mergeFieldStatus',_0x300a14,_0x3e8a1c),_0x34c75a['setAttribute']('data-cke-tooltip-text',this['getLabel'](_0x2628df)||_0x2628df,_0x3e8a1c);}}_0x34c75a['setAttribute']('data-merge-field-name',_0x2628df,_0x4c37e2),_0x300a14&&_0x34c75a['setCustomProperty']('mergeFieldStatus',_0x300a14,_0x4c37e2);};return _0x22b8bb=>{_0x22b8bb['on']('attribute:src:'+_0x4a7d0c,_0xa4157,{'priority':'low'});};}['_setupTooltipsTogglingForImageMergeField'](_0x43a546,_0x53847a){if(!_0x53847a['target'])return null;const _0x5dee64=_0x53847a['target']['parentElement'];return _0x5dee64&&_0x5dee64['classList']['contains']('ck-merge-field-image')?new _0x59af6e(_0x5dee64,_0x288afa=>{const _0x434f2f=_0x288afa['target'],_0x4b6e25=_0x434f2f['querySelector']('.ck-merge-field'),_0x3289d1=_0x434f2f['querySelector']('.ck-merge-field__content');_0x4b6e25&&_0x3289d1&&(_0x3289d1['scrollWidth']>_0x3289d1['getBoundingClientRect']()['width']?_0x4b6e25['removeAttribute']('data-cke-tooltip-disabled'):_0x4b6e25['setAttribute']('data-cke-tooltip-disabled','true'));}):null;}['_createMergeFieldWidget'](_0x54bda9,_0x48c758,_0x4191ec){const {label:_0x443981,classes:_0x2245f5,status:_0x1312b7,height:_0x357bff}=this['_prepareViewElementData'](_0x54bda9),_0x54268f=this['_mergeFieldPrefix'],_0x1cde9c=this['_mergeFieldSuffix'],_0x1811d1=this['editor']['config']['get']('mergeFields.sanitizeHtml'),_0x3a1c56='text'===_0x4191ec?'span':'div';let _0x12e81a;if('$labels'===this['previewMode'])_0x12e81a=_0x48c758['createContainerElement'](_0x3a1c56,{'class':_0x2245f5},[_0x48c758['createUIElement']('span',{'class':'ck-merge-field__affix'},function(_0x57be3e){const _0x3b2843=this['toDomElement'](_0x57be3e);return _0x3b2843['innerHTML']=_0x54268f,_0x3b2843;}),_0x48c758['createContainerElement']('span',{'class':'ck-merge-field__content'},_0x48c758['createText'](String(_0x443981))),_0x48c758['createUIElement']('span',{'class':'ck-merge-field__affix'},function(_0x201252){const _0x2326ca=this['toDomElement'](_0x201252);return _0x2326ca['innerHTML']=_0x1cde9c,_0x2326ca;})]);else{if(_0x1312b7){const _0x5222d5=this['_shouldPreviewHtmlValues']?_0x48c758['createRawElement']('span',{'class':'ck-merge-field__content'},function(_0x333b38,_0x4bbdaf){_0x4bbdaf['setContentOf'](_0x333b38,_0x1811d1(_0x443981)['html']);}):_0x48c758['createContainerElement']('span',{'class':'ck-merge-field__content'},_0x48c758['createText'](_0x443981));if(_0x12e81a=_0x48c758['createContainerElement'](_0x3a1c56,{'class':_0x2245f5},[_0x5222d5]),'text'===_0x4191ec||['WARNING_MISSING_DEFAULT_VALUE','WARNING_MISSING_DATA']['includes'](_0x1312b7)){const _0x2a8b05=_0x48c758['createUIElement']('span',{'class':'ck-merge-field__icon'},function(_0x15ea9f){const _0x3be596=this['toDomElement'](_0x15ea9f),_0x5e902b=new _0x4893e2();return _0x5e902b['set']({'content':_0x31c0aa}),_0x5e902b['render'](),_0x3be596['appendChild'](_0x5e902b['element']),_0x3be596;});_0x48c758['insert'](_0x48c758['createPositionAt'](_0x12e81a,'end'),_0x2a8b05);}_0x48c758['setCustomProperty']('mergeFieldStatus',_0x1312b7,_0x12e81a);}else{const _0x25c015=this['_shouldPreviewHtmlValues']?_0x48c758['createRawElement'](_0x3a1c56,{},function(_0x5de58b,_0x5dc38d){_0x5dc38d['setContentOf'](_0x5de58b,_0x1811d1(_0x443981)['html']);}):_0x48c758['createText'](_0x443981);_0x12e81a=_0x48c758['createContainerElement'](_0x3a1c56,{'class':_0x2245f5},_0x25c015);}}if('block'===_0x4191ec){const _0x434da3=_0x48c758['createContainerElement']('div',{'class':'ck-merge-field-block'},[_0x12e81a]);if(('$labels'===this['previewMode']||_0x1312b7&&['WARNING_MISSING_DEFAULT_VALUE','WARNING_MISSING_DATA']['includes'](_0x1312b7))&&_0x48c758['setAttribute']('style','height:\x20'+_0x357bff+'px',_0x434da3),_0x12e81a['hasClass']('ck-merge-field_with-value'))_0x48c758['addClass']('ck-merge-field-block_with-value',_0x434da3);else{if(_0x12e81a['hasClass']('ck-merge-field_with-warning')){for(const _0x532c95 of _0x12e81a['getClassNames']())if('ck-merge-field'!==_0x532c95){const _0xabef85=_0x532c95['replace']('ck-merge-field','ck-merge-field-block');_0x48c758['addClass'](_0xabef85,_0x434da3);}_0x48c758['setCustomProperty']('mergeFieldStatus',_0x1312b7,_0x434da3);}}return _0x48c758['setCustomProperty']('mergeFieldBlock',!0x0,_0x434da3),_0x48c758['setAttribute']('data-merge-field-name',_0x54bda9['getAttribute']('id'),_0x434da3),_0x2bbee1(_0x434da3,_0x48c758,{'hasSelectionHandle':!0x0});}return _0x48c758['setCustomProperty']('mergeField',!0x0,_0x12e81a),_0x48c758['setAttribute']('data-merge-field-name',_0x54bda9['getAttribute']('id'),_0x12e81a),_0x2bbee1(_0x12e81a,_0x48c758);}['_prepareViewElementData'](_0x5d572e){const _0xab9cc=_0x5d572e['getAttribute']('id'),_0x375fd0=this['getDefinition'](_0xab9cc);if(!_0x375fd0)return'$labels'===this['previewMode']?{'label':_0xab9cc,'classes':'ck-merge-field'}:{'label':_0xab9cc,'classes':'ck-merge-field\x20ck-merge-field_with-warning\x20ck-merge-field_with-warning_missing-definition','status':'WARNING_MISSING_DATA'};const _0x4e7799=this['getLabel'](_0xab9cc)||_0xab9cc,_0x148bbc=this['getMergeFieldDefaultValue'](_0xab9cc),_0x2db5f1=this['getMergeFieldHeight'](_0xab9cc);if('$labels'===this['previewMode'])return{'label':_0x4e7799,'height':_0x2db5f1,'classes':'ck-merge-field'};if('$defaultValues'===this['previewMode'])return _0x148bbc?{'label':_0x148bbc,'height':_0x2db5f1,'classes':'ck-merge-field\x20ck-merge-field_with-value'}:{'label':_0x4e7799,'height':_0x2db5f1,'classes':'ck-merge-field\x20ck-merge-field_with-warning\x20ck-merge-field_with-warning_no-default','status':'WARNING_MISSING_DEFAULT_VALUE'};const _0x11e0ce=this['getMergeFieldValue'](_0x375fd0['id'],this['previewMode']);return _0x11e0ce?{'label':_0x11e0ce,'height':_0x2db5f1,'classes':'ck-merge-field\x20ck-merge-field_with-value'}:_0x148bbc?{'label':_0x148bbc,'height':_0x2db5f1,'classes':'ck-merge-field\x20ck-merge-field_with-warning\x20ck-merge-field_with-warning_default-value-used','status':'WARNING_MISSING_DATA_USED_DEFAULT_VALUE'}:{'label':_0x4e7799,'height':_0x2db5f1,'classes':'ck-merge-field\x20ck-merge-field_with-warning\x20ck-merge-field_with-warning_missing-data','status':'WARNING_MISSING_DATA'};}['_createTextualMergeField'](_0x3f7b76,_0x5f13dc,_0x17f2d1){const _0x16ddff=_0x3f7b76['getAttribute']('id');let _0x328ade;if(_0x17f2d1['isClipboardPipeline']&&'$labels'!==this['previewMode'])return this['_downcastForClipboard'](_0x16ddff,_0x5f13dc);const _0x29f536=_0x17f2d1['mergeFieldsData'],_0x557875=_0x29f536&&_0x29f536[_0x16ddff]?_0x29f536[_0x16ddff]:this['wrapInAffixes'](_0x16ddff);if(_0x29f536)_0x328ade=_0x5f13dc['createRawElement']('span',{},function(_0x316da5,_0x4b97cb){_0x4b97cb['setContentOf'](_0x316da5,String(_0x557875));});else{_0x328ade=_0x5f13dc['createContainerElement']('span');const _0x2e9b7e=_0x5f13dc['createText'](_0x557875);_0x5f13dc['insert'](_0x5f13dc['createPositionAt'](_0x328ade,'end'),_0x2e9b7e);}return _0x5f13dc['setCustomProperty']('dataPipeline:transparentRendering',!0x0,_0x328ade),_0x328ade;}['_downcastForClipboard'](_0x8fc745,_0x5387d8){const _0xb800e0='block'===this['getMergeFieldType'](_0x8fc745)?'div':'span';let _0x1e70c7,_0x3d2ab8;_0x1e70c7='$defaultValues'===this['previewMode']?this['getMergeFieldDefaultValue'](_0x8fc745)||this['getLabel'](_0x8fc745)||this['wrapInAffixes'](_0x8fc745):this['getMergeFieldValue'](_0x8fc745,this['previewMode'])||this['getMergeFieldDefaultValue'](_0x8fc745)||this['getLabel'](_0x8fc745)||this['wrapInAffixes'](_0x8fc745);const _0x56527a=this['editor']['config']['get']('mergeFields.sanitizeHtml');return _0x3d2ab8=this['_shouldPreviewHtmlValues']?_0x5387d8['createRawElement'](_0xb800e0,{'data-ck-merge-field':_0x8fc745},function(_0x37682e,_0x1c8116){_0x1c8116['setContentOf'](_0x37682e,_0x56527a(_0x1e70c7)['html']);}):_0x5387d8['createContainerElement'](_0xb800e0,{'data-ck-merge-field':_0x8fc745},_0x5387d8['createText'](_0x1e70c7)),_0x3d2ab8;}['_validatePreviewMode'](_0x2e7405){if(!this['availablePreviewModes']['includes'](_0x2e7405))throw new _0x5af5e8('merge-fields-invalid-preview-mode-set',this,{'availablePreviewModes':this['availablePreviewModes'],'previewMode':_0x2e7405});}['_trackAddedMergeFields'](){for(const _0xdc0008 of this['editor']['model']['document']['differ']['getChanges']({'includeChangesInGraveyard':!0x0})){if('insert'!==_0xdc0008['type']||'$text'===_0xdc0008['name'])continue;if('mergeField'===_0xdc0008['name']||'mergeFieldBlock'===_0xdc0008['name']){this['_mergeFieldElements']['add'](_0xdc0008['position']['nodeAfter']);continue;}if('imageInline'===_0xdc0008['name']||'imageBlock'===_0xdc0008['name']&&_0xdc0008['attributes']['get']('src')&&String(_0xdc0008['attributes']['get']('src'))['match'](this['_mergeFieldRegExp'])){this['_mergeFieldElements']['add'](_0xdc0008['position']['nodeAfter']);continue;}const _0x42eb83=this['editor']['model']['createRangeIn'](_0xdc0008['position']['nodeAfter']);for(const _0x7bf60 of _0x42eb83['getItems']())_0x7bf60['is']('element')&&this['isMergeField'](_0x7bf60)&&this['_mergeFieldElements']['add'](_0x7bf60);}}['_registerConversionPostFixer'](){const _0x140c29=this['editor'];_0x140c29['model']['document']['registerPostFixer'](_0x3f402b=>{if(!_0x3f402b['batch']['isLocal'])return!0x1;const _0x50d835=[],_0x4562f5=new Set(),_0x6c0f87=this['_mergeFieldRegExp'];let _0x107a4a=!0x1;for(const _0x441fad of _0x140c29['model']['document']['differ']['getChanges']())if('insert'===_0x441fad['type']||'remove'===_0x441fad['type']){let _0x4a204c='$text'==_0x441fad['name']?_0x441fad['position']['parent']:_0x441fad['position']['nodeAfter'];if(!_0x4a204c)continue;_0x4a204c['is']('$text')&&(_0x4a204c=_0x4a204c['parent']),_0x2c98bd(_0x4a204c);}for(const _0x2b5368 of _0x50d835['reverse']()){const {match:_0x4506f2,item:_0x39d083}=_0x2b5368,_0x223ce1=_0x3f402b['createPositionAt'](_0x39d083,_0x4506f2['index']),_0x28b068=_0x223ce1['getShiftedBy'](_0x4506f2[0x0]['length']),_0x37ada9=_0x3f402b['createRange'](_0x223ce1,_0x28b068),_0x2ba1a7=_0x4506f2[0x0],_0x5b17f4=this['unwrapAffixes'](_0x2ba1a7),_0x4c81b1=_0x513ac6(_0x37ada9),_0x560b86=this['getMergeFieldType'](_0x5b17f4);if(A['test'](_0x5b17f4)){if(_0x4c81b1['set']('id',_0x5b17f4),'block'===_0x560b86){const _0x4608dc=_0x3f402b['createElement']('mergeFieldBlock',{'id':_0x5b17f4});_0x3f402b['remove'](_0x37ada9),_0x140c29['model']['insertObject'](_0x4608dc,null,null,{'setSelection':'on','findOptimalPosition':void 0x0});}else{if('image'===_0x560b86){const _0x17f116=_0x3f402b['createElement']('imageBlock',{'src':this['wrapInAffixes'](_0x5b17f4)});_0x3f402b['remove'](_0x37ada9),_0x140c29['model']['insertObject'](_0x17f116,null,null,{'setSelection':'on','findOptimalPosition':void 0x0});}else{const _0x4a82b8=_0x3f402b['createElement']('mergeField',_0x4c81b1);_0x140c29['model']['schema']['checkChild'](_0x37ada9['start'],'mergeField')?_0x140c29['model']['insertObject'](_0x4a82b8,_0x37ada9):_0x3f402b['remove'](_0x37ada9);}}_0x107a4a=!0x0;}}return _0x107a4a;function _0x2c98bd(_0x166390){let _0x1b5b36='',_0x36f93a=0x0;if(!_0x4562f5['has'](_0x166390))for(const _0x1cd3b1 of _0x166390['getChildren']()){const _0x5af52d=_0x1cd3b1['nextSibling'];if(_0x1cd3b1['is']('$text')&&(''===_0x1b5b36&&_0x1cd3b1['startOffset']&&(_0x36f93a=_0x1cd3b1['startOffset']),_0x1b5b36+=_0x1cd3b1['data']),!_0x5af52d||_0x5af52d['is']('element')){for(const _0x457595 of _0x1b5b36['matchAll'](_0x6c0f87))_0x457595['index']=_0x457595['index']+_0x36f93a,_0x50d835['push']({'match':_0x457595,'item':_0x166390});_0x4562f5['add'](_0x166390),_0x1b5b36='';}_0x1cd3b1['is']('element')&&_0x2c98bd(_0x1cd3b1);}}function _0x513ac6(_0x3b4b2d){const _0x1fb53c=_0x3b4b2d['getItems'](),_0x9186de=_0x1fb53c['next']()['value'],_0xb1d4c8=new Map(_0x9186de['getAttributes']());for(const _0x4ed4b6 of _0x1fb53c)for(const [_0x523ae4,_0x28401a]of _0xb1d4c8)_0x4ed4b6['getAttribute'](_0x523ae4)!==_0x28401a&&_0xb1d4c8['delete'](_0x523ae4);return _0xb1d4c8;}});}['_disableCommandOnMergeFields'](_0x4633ef){const _0x13cfab=this['editor'],_0x208bcb=_0x13cfab['commands']['get'](_0x4633ef);_0x208bcb&&_0x208bcb['on']('set:isEnabled',(_0x2f4886,_0x16e4dd,_0x2b427a)=>{if(0x1==_0x2b427a){const _0x296163=_0x13cfab['model']['document']['selection']['getSelectedElement']();_0x296163&&this['isMergeField'](_0x296163)&&(_0x2f4886['return']=!0x1,_0x2f4886['stop']());}});}}class D extends _0x2f724d{['filter'](_0x55926e){return _0x245ae2(_0x55926e,this['items']);}}class U extends _0x3d5241{constructor(_0x37bec4){super(_0x37bec4),this['set']('text','');const _0x798774=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-merge-fields-form']},'children':[{'tag':'div','attributes':{'class':['ck','ck-merge-fields-form__status']},'children':[{'text':_0x798774['to']('text')}]}]});}}function q(_0x315952,_0x3f238f){const t=_0x315952['t'];switch(_0x3f238f){case'Search\x20merge\x20field':return t('Search\x20merge\x20field');case'No\x20merge\x20fields\x20found':return t('No\x20merge\x20fields\x20found');case'No\x20merge\x20fields\x20available':return t('No\x20merge\x20fields\x20available');case'Insert\x20merge\x20field':return t('Insert\x20merge\x20field');case'Merge\x20field':return t('Merge\x20field');case'Merge\x20fields\x20preview':return t('Merge\x20fields\x20preview');case'Labels':return t('Labels');case'Default\x20values':return t('Default\x20values');case'WARNING_MISSING_DATA_USED_DEFAULT_VALUE':return t({'string':'Default\x20value\x20is\x20used.','id':'WARNING_MISSING_DATA_USED_DEFAULT_VALUE'});case'WARNING_MISSING_DEFAULT_VALUE':return t({'string':'Default\x20value\x20not\x20available.','id':'WARNING_MISSING_DEFAULT_VALUE'});case'WARNING_MISSING_DATA':return t({'string':'Value\x20not\x20available.','id':'WARNING_MISSING_DATA'});default:return _0x3f238f;}}class u extends _0x29ef2f{['licenseKey'];['_licenseKeyCheckInterval'];['_balloon'];['_balloonPanelView']=null;static get['requires'](){return['Mention',m,_0x346ff5,_0x4ec514];}static get['pluginName'](){return'MergeFieldsUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x36be4c){super(_0x36be4c),this['_removeDefaultValuesPreviewIfUnnecessary'](),this['_removeMenuBarButtonIfUnnecessary'](),this['_setupMentionConfiguration']();}['init'](){const _0x734720=this['editor'];_0x734720['ui']['componentFactory']['add']('insertMergeField',_0x3722bc=>{const _0x97f4d1=function(_0x56f527){const _0x466694=_0x177a35(_0x56f527);return _0x466694['set']({'class':'ck-insert-merge-field-dropdown','isEnabled':!0x0}),_0x466694['buttonView']['set']({'label':q(_0x56f527,'Insert\x20merge\x20field'),'icon':_0x3baa0a,'tooltip':!0x0}),_0x466694;}(_0x3722bc);return _0x97f4d1['bind']('isEnabled')['toMany']([_0x734720['commands']['get']('insertMergeField'),_0x734720['commands']['get']('insertMergeFieldBlock'),_0x734720['commands']['get']('insertMergeFieldImage')],'isEnabled',(..._0x5595dc)=>_0x5595dc['some'](_0x2e6843=>_0x2e6843)),_0x97f4d1['once']('change:isOpen',()=>{const _0x886468={'insertInline':_0x734720['commands']['get']('insertMergeField'),'insertBlock':_0x734720['commands']['get']('insertMergeFieldBlock'),'insertImage':_0x734720['commands']['get']('insertMergeFieldImage')},_0x27f78a=function(_0x5db0ee,_0x44101d,_0x234386){const _0x23c249=new D(_0x5db0ee),_0x5debda=[],_0x137356=[];for(const _0x4d1719 of _0x44101d)if('groupId'in _0x4d1719){const _0x209b6f=C(_0x5db0ee,_0x4d1719['groupLabel']||_0x4d1719['groupId'],_0x4d1719['definitions'],_0x234386);_0x209b6f['delegate']('execute')['to'](_0x23c249),_0x137356['push'](_0x209b6f);}else _0x5debda['push'](_0x4d1719);if(_0x5debda['length']){const _0x33c9c0=C(_0x5db0ee,'Other',_0x5debda,_0x234386);_0x33c9c0['delegate']('execute')['to'](_0x23c249),_0x137356['push'](_0x33c9c0);}return _0x23c249['items']['addMany'](_0x137356),_0x23c249;}(_0x3722bc,_0x734720['config']['get']('mergeFields.definitions'),_0x886468);_0x27f78a['delegate']('execute')['to'](_0x97f4d1),_0x97f4d1['on']('execute',(_0x5ef21b,_0x5d72bd)=>{const _0x28fe62=_0x734720['plugins']['get']('MergeFieldsEditing')['getMergeFieldType'](_0x5d72bd);'image'===_0x28fe62?_0x734720['execute']('insertMergeFieldImage',_0x5d72bd):'block'===_0x28fe62?_0x734720['execute']('insertMergeFieldBlock',_0x5d72bd):_0x734720['execute']('insertMergeField',_0x5d72bd),_0x734720['editing']['view']['focus']();});const _0x5616dd=function(_0x5c08a6,_0x1ce3ed){return new _0x1004ce(_0x5c08a6,{'filteredView':_0x1ce3ed,'queryView':{'label':q(_0x5c08a6,'Search\x20merge\x20field')},'class':'ck-merge-fields-search','infoView':{'text':{'notFound':{'primary':q(_0x5c08a6,'No\x20merge\x20fields\x20found')},'noSearchableItems':{'primary':q(_0x5c08a6,'No\x20merge\x20fields\x20available')}}}});}(_0x3722bc,_0x27f78a);_0x97f4d1['panelView']['children']['add'](_0x5616dd),_0x97f4d1['on']('change:isOpen',(_0x35d766,_0x458ef2,_0x50e655)=>{_0x50e655&&_0x5616dd['reset']();});}),_0x97f4d1;}),_0x734720['ui']['componentFactory']['add']('menuBar:insertMergeField',_0x430306=>{const _0x336255=new _0x3efb4f(_0x430306),_0x20412d={'insertInline':_0x734720['commands']['get']('insertMergeField'),'insertBlock':_0x734720['commands']['get']('insertMergeFieldBlock'),'insertImage':_0x734720['commands']['get']('insertMergeFieldImage')};_0x336255['buttonView']['set']({'label':q(_0x430306,'Merge\x20field'),'icon':_0x3baa0a}),_0x336255['bind']('isEnabled')['toMany']([...Object['values'](_0x20412d)],'isEnabled',(..._0x4c69cf)=>_0x4c69cf['some'](_0xef9a53=>_0xef9a53));const _0x1b9bf7=[],_0xf9165a=new _0x246908(_0x430306);for(const _0x5988d3 of _0x734720['config']['get']('mergeFields.definitions'))if('groupId'in _0x5988d3){const _0x10295b=new _0x14d5fc(_0x430306,_0x336255),_0x541ec2=z(_0x430306,_0x5988d3,_0x20412d);_0x10295b['children']['add'](_0x541ec2),_0x541ec2['delegate']('execute')['to'](_0x336255),_0xf9165a['items']['add'](_0x10295b);}else _0x1b9bf7['push'](_0x5988d3);if(_0x1b9bf7['length']){if(0x0===_0xf9165a['items']['length'])for(const _0x195561 of _0x1b9bf7){let _0x568dcb;_0x568dcb='block'===_0x195561['type']?_0x20412d['insertBlock']:'image'===_0x195561['type']?_0x20412d['insertImage']:_0x20412d['insertInline'];const _0x3f53a1=G(_0x430306,_0x195561,_0x336255,_0x568dcb);_0xf9165a['items']['add'](_0x3f53a1);}else{const _0x210888=new _0x14d5fc(_0x430306,_0x336255),_0x4ce1d9=z(_0x430306,{'groupId':'Other','definitions':_0x1b9bf7},_0x20412d);_0x210888['children']['add'](_0x4ce1d9),_0x4ce1d9['delegate']('execute')['to'](_0x336255),_0xf9165a['items']['add'](_0x210888);}}return _0x336255['panelView']['children']['add'](_0xf9165a),_0x336255['on']('execute',(_0xabe0a0,_0x46a749)=>{const _0x85174f=_0x734720['plugins']['get']('MergeFieldsEditing')['getMergeFieldType'](_0x46a749);'image'===_0x85174f?_0x734720['execute']('insertMergeFieldImage',_0x46a749):'block'===_0x85174f?_0x734720['execute']('insertMergeFieldBlock',_0x46a749):_0x734720['execute']('insertMergeField',_0x46a749),_0x734720['editing']['view']['focus']();}),_0x336255;});const _0x7d8a0f=_0x734720['config']['get']('mergeFields.previewModes'),_0x3f8267=[];if(_0x7d8a0f['includes']('$labels')&&_0x3f8267['push']({'type':'button','model':new _0x5d5de9({'withText':!0x0,'isToggleable':!0x0,'label':q(this['editor']['locale'],'Labels'),'commandValue':'$labels'})}),_0x7d8a0f['includes']('$defaultValues')&&_0x3f8267['push']({'type':'button','model':new _0x5d5de9({'withText':!0x0,'isToggleable':!0x0,'label':q(this['editor']['locale'],'Default\x20values'),'commandValue':'$defaultValues'})}),_0x7d8a0f['includes']('$dataSets')){const _0x582c63=_0x734720['config']['get']('mergeFields.dataSets');if(_0x582c63['length']){for(const _0x1e5881 of _0x582c63)_0x3f8267['push']({'type':'button','model':new _0x5d5de9({'withText':!0x0,'isToggleable':!0x0,'label':_0x1e5881['label']||_0x1e5881['id'],'commandValue':_0x1e5881['id']})});}}_0x734720['ui']['componentFactory']['add']('previewMergeFields',_0x1f30e2=>{const _0x128f34=_0x734720['commands']['get']('previewMergeFields'),_0x3c8565=new _0x18fab3();for(const _0xa0a087 of _0x4031a9(_0x3f8267))_0xa0a087['model']['bind']('isOn')['to'](_0x128f34,'value',_0xb59610=>_0xb59610===_0xa0a087['model']['commandValue']),_0x3c8565['add'](_0xa0a087);const _0x2d05ee=_0x177a35(_0x1f30e2),_0x400079=q(_0x1f30e2,'Merge\x20fields\x20preview');return _0x2d05ee['bind']('isEnabled')['to'](_0x128f34),_0x1f1d4c(_0x2d05ee,_0x3c8565,{'ariaLabel':_0x400079,'role':'menu'}),_0x2d05ee['set']({'class':'ck-merge-fields-preview-dropdown'}),_0x2d05ee['buttonView']['set']({'label':_0x400079,'ariaLabel':_0x400079,'ariaLabelledBy':void 0x0,'isOn':!0x1,'icon':_0x1f5d82,'tooltip':!0x0}),this['listenTo'](_0x2d05ee,'execute',_0x461c0a=>{const {commandValue:_0x3aa378}=_0x461c0a['source'];_0x734720['execute']('previewMergeFields',_0x3aa378),_0x734720['editing']['view']['focus']();}),_0x2d05ee;}),_0x734720['ui']['componentFactory']['add']('menuBar:previewMergeFields',_0x36e73a=>{const _0xa977ec=new _0x3efb4f(_0x36e73a),_0x32f040=_0x734720['commands']['get']('previewMergeFields');_0xa977ec['buttonView']['set']({'label':q(_0x36e73a,'Merge\x20fields\x20preview'),'icon':_0x1f5d82}),_0xa977ec['bind']('isEnabled')['to'](_0x32f040);const _0x5f8ff0=new _0x246908(_0x36e73a);_0x5f8ff0['set']({'ariaLabel':q(_0x36e73a,'Merge\x20fields\x20preview')});for(const _0x17a474 of _0x4031a9(_0x3f8267)){const _0x5229f1=new _0x14d5fc(_0x36e73a,_0xa977ec),_0x5c9217=new _0x4edeaa(_0x36e73a);_0x17a474['model']['bind']('isOn')['to'](_0x32f040,'value',_0xcc4491=>_0xcc4491===_0x17a474['model']['commandValue']),_0x5c9217['isToggleable']=!0x0,_0x5c9217['bind'](...Object['keys'](_0x17a474['model']))['to'](_0x17a474['model']),_0x5c9217['delegate']('execute')['to'](_0xa977ec),_0x5c9217['on']('execute',_0x1c49b9=>{const {commandValue:_0x2f3228}=_0x1c49b9['source'];_0x734720['execute']('previewMergeFields',_0x2f3228),_0x734720['editing']['view']['focus']();}),_0x5229f1['children']['add'](_0x5c9217),_0x5f8ff0['items']['add'](_0x5229f1);}return _0xa977ec['panelView']['children']['add'](_0x5f8ff0),_0xa977ec;}),this['_balloon']=_0x734720['plugins']['get'](_0x346ff5),this['listenTo'](_0x734720['ui'],'update',()=>{this['_updateBalloonVisibility']();},{'priority':'low'}),this['listenTo'](_0x734720['ui']['focusTracker'],'change:isFocused',(_0x2418ea,_0x4e8e55,_0x51dc9c)=>{this['_balloon']['visibleView']&&this['_balloon']['visibleView']===this['_balloonPanelView']&&(_0x51dc9c?this['_updateBalloonVisibility']():this['_hideBalloon']());},{'priority':'low'}),this['editor']['once']('ready',this['_overrideMentionExecuteListener']['bind'](this)),this['licenseKey']=this['editor']['config']['get']('licenseKey');const _0x191c04=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x458ad7;for(const _0x2caeec in _0x191c04){const _0x57461b=_0x2caeec,_0x156e88=_0x191c04[_0x57461b];if('mergeFieldsLicenseKeyValid'==_0x156e88||'mergeFieldsLicenseKeyInvalid'==_0x156e88||'mergeFieldsLicenseKeyExpired'==_0x156e88||'mergeFieldsLicenseKeyDomainLimit'==_0x156e88||'mergeFieldsLicenseKeyNotAllowed'==_0x156e88||'mergeFieldsLicenseKeyEvaluationLimit'==_0x156e88||'mergeFieldsLicenseKeyTrialLimit'==_0x156e88||'mergeFieldsLicenseKeyUsageLimit'==_0x156e88){delete _0x191c04[_0x57461b],_0x458ad7=_0x156e88,clearInterval(this['_licenseKeyCheckInterval']),this['_licenseKeyCheckInterval']=void 0x0;break;}}'mergeFieldsLicenseKeyInvalid'==_0x458ad7&&_0x191c04['_showLicenseError']('invalid'),'mergeFieldsLicenseKeyExpired'==_0x458ad7&&_0x191c04['_showLicenseError']('expired'),'mergeFieldsLicenseKeyDomainLimit'==_0x458ad7&&_0x191c04['_showLicenseError']('domainLimit'),'mergeFieldsLicenseKeyNotAllowed'==_0x458ad7&&_0x191c04['_showLicenseError']('featureNotAllowed','MergeFields'),'mergeFieldsLicenseKeyEvaluationLimit'==_0x458ad7&&_0x191c04['_showLicenseError']('evaluationLimit'),'mergeFieldsLicenseKeyTrialLimit'==_0x458ad7&&_0x191c04['_showLicenseError']('trialLimit'),'mergeFieldsLicenseKeyUsageLimit'==_0x458ad7&&_0x191c04['_showLicenseError']('usageLimit');},0x3e8);}['destroy'](){super['destroy'](),this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}['_updateBalloonVisibility'](){const _0x1c3563=this['editor']['editing']['view']['document']['selection']['getSelectedElement'](),_0x40dddf=!(!_0x1c3563||!_0x1c3563['getCustomProperty']('mergeFieldStatus'));if(this['_balloon']['hasView'](this['_balloonPanelView'])&&this['_balloon']['visibleView']===this['_balloonPanelView']){if(_0x40dddf){const _0x22a4f6=_0x1c3563['getCustomProperty']('mergeFieldStatus');this['_balloonPanelView']['text']=q(this['editor']['locale'],_0x22a4f6),this['_balloon']['updatePosition'](this['_getBalloonPositionData']());}else this['_hideBalloon']();}else{if(_0x40dddf){const _0x523f42=_0x1c3563['getCustomProperty']('mergeFieldStatus');this['_showBalloon'](q(this['editor']['locale'],_0x523f42));}}}['_showBalloon'](_0x1dd567){this['_balloonPanelView']||(this['_balloonPanelView']=new U(this['editor']['locale']),this['_balloonPanelView']['text']=_0x1dd567),this['_balloon']['hasView'](this['_balloonPanelView'])||(this['_balloon']['add']({'stackId':'mergeFieldsStatus','view':this['_balloonPanelView'],'position':this['_getBalloonPositionData']()}),this['_balloon']['showStack']('mergeFieldsStatus'));}['_getBalloonPositionData'](){const _0x77027a=this['editor']['editing']['view'];return{'target':()=>{const _0x1f0ddd=_0x77027a['document']['selection']['getFirstRange'](),_0x449a81=_0x77027a['domConverter']['mapViewToDom'](_0x1f0ddd['getContainedElement']());return _0x449a81?Array['from'](_0x449a81['getClientRects']())[0x0]:_0x77027a['domConverter']['viewRangeToDom'](_0x1f0ddd);}};}['_hideBalloon'](){this['_balloon']['remove'](this['_balloonPanelView']);}['_removeDefaultValuesPreviewIfUnnecessary'](){if(Object['values'](this['editor']['plugins']['get']('MergeFieldsEditing')['getDefaultValues']())['some'](_0x4ab635=>_0x4ab635))return;const _0x5396af=this['editor']['config']['get']('mergeFields.previewModes');_0x5396af['indexOf']('$defaultValues')>-0x1&&_0x5396af['length']>0x1&&(_0x5396af['splice'](_0x5396af['indexOf']('$defaultValues'),0x1),this['editor']['config']['set']('mergeFields.previewModes',_0x5396af));}['_removeMenuBarButtonIfUnnecessary'](){const _0x34d417=this['editor']['config'];if(_0x34d417['get']('mergeFields.previewModes')){const _0x234219=_0x34d417['get']('mergeFields.previewModes');if(0x1===_0x234219['length']){if(_0x234219['includes']('$dataSets'))0x1===_0x34d417['get']('mergeFields.dataSets')['length']&&_0x984dd4();else _0x984dd4();}}function _0x984dd4(){const _0x209e57=_0x34d417['get']('menuBar.removeItems');_0x209e57?(_0x209e57['push']('menuBar:previewMergeFields'),_0x34d417['set']('menuBar.removeItems',_0x209e57)):_0x34d417['set']('menuBar.removeItems',['menuBar:previewMergeFields']);}}['_setupMentionConfiguration'](){const _0x45e15e=this['editor'],_0x1353c8=_0x45e15e['config']['get']('mention.feeds'),_0x26b316=_0x45e15e['config']['get']('mergeFields.prefix');_0x1353c8['push']({'marker':_0x26b316,'dropdownLimit':0xa,'feed':_0x17d181=>_0x45e15e['plugins']['get']('MergeFieldsEditing')['flattenedMergeFieldDefinitions']['filter'](_0x132c48=>{const _0x3b54ea=_0x45e15e['commands']['get']('insertMergeField')['isEnabled'],_0x4e1850=_0x45e15e['commands']['get']('insertMergeFieldBlock')['isEnabled'],_0x53ec76=_0x45e15e['commands']['get']('insertMergeFieldImage')['isEnabled'],_0x2ef5b9=_0x45e15e['plugins']['get']('MergeFieldsEditing')['getMergeFieldType'](_0x132c48['id']);if('text'===_0x2ef5b9&&!_0x3b54ea)return!0x1;if('block'===_0x2ef5b9&&!_0x4e1850)return!0x1;if('image'===_0x2ef5b9&&!_0x53ec76)return!0x1;return(_0x45e15e['plugins']['get']('MergeFieldsEditing')['getLabel'](_0x132c48['id'])||_0x132c48['id'])['toLowerCase']()['includes'](_0x17d181['toLowerCase']());}),'itemRenderer':_0x36c126=>{const _0x128a86=document['createElement']('button');return _0x128a86['innerHTML']=''+(_0x36c126['label']||_0x36c126['id']),_0x128a86;}}),_0x45e15e['config']['set']('mention.feeds',_0x1353c8);}['_overrideMentionExecuteListener'](){const _0x383c9e=this['editor'];_0x383c9e['commands']['get']('mention')['on']('execute',(_0x475305,_0xf426d3)=>{const _0x3a917f=_0xf426d3[0x0];_0x3a917f['marker']===_0x383c9e['config']['get']('mergeFields.prefix')&&_0x383c9e['model']['change'](_0x5aae7a=>{_0x5aae7a['remove'](_0x3a917f['range']);const _0x480852=_0x3a917f['mention']['id'],_0x48b07d=_0x383c9e['plugins']['get']('MergeFieldsEditing')['getMergeFieldType'](_0x480852);'text'===_0x48b07d?_0x383c9e['execute']('insertMergeField',_0x480852):'block'===_0x48b07d?_0x383c9e['execute']('insertMergeFieldBlock',_0x480852,!0x1):_0x383c9e['execute']('insertMergeFieldImage',_0x480852,{'breakBlock':!0x0}),_0x475305['stop']();});},{'priority':'high'});}}function C(_0x1001a1,_0x2748cc,_0x58e187,_0x2bde9c){const _0x3a0242=new _0x47b135(_0x1001a1,new _0x51ace8());_0x3a0242['label']=_0x2748cc;for(const _0xb8b433 of _0x58e187){let _0x2aaf52;_0x2aaf52='block'===_0xb8b433['type']?_0x2bde9c['insertBlock']:'image'===_0xb8b433['type']?_0x2bde9c['insertImage']:_0x2bde9c['insertInline'];const _0x4b7bd9=R(_0x1001a1,_0xb8b433,_0x2aaf52);_0x4b7bd9['delegate']('execute')['to'](_0x3a0242),_0x3a0242['items']['add'](_0x4b7bd9);}return _0x3a0242;}function R(_0x29c61a,_0x26c26f,_0x1deb6d){const _0x2f575f=new _0xa1bcb0(_0x29c61a),_0x3243e1=new _0x5cb6bf(),_0x1b54b1=new _0x3877d8(_0x29c61a,_0x3243e1);return _0x2f575f['children']['add'](_0x1b54b1),_0x1b54b1['set']({'label':_0x26c26f['label']||_0x26c26f['id'],'withText':!0x0}),_0x1b54b1['bind']('isEnabled')['to'](_0x1deb6d),_0x1b54b1['on']('execute',()=>{_0x2f575f['fire']('execute',_0x26c26f['id']);}),_0x2f575f;}function z(_0x12028a,_0x595401,_0x431fa1){const _0xd641b=new _0x3efb4f(_0x12028a),_0x30ed13=new _0x246908(_0x12028a);for(const _0x5ce87f of _0x595401['definitions']){let _0x52d0bf;_0x52d0bf='block'===_0x5ce87f['type']?_0x431fa1['insertBlock']:'image'===_0x5ce87f['type']?_0x431fa1['insertImage']:_0x431fa1['insertInline'];const _0x3cd24f=G(_0x12028a,_0x5ce87f,_0xd641b,_0x52d0bf);_0x30ed13['items']['add'](_0x3cd24f);}return _0xd641b['set']({'class':'ck-menu-bar__merge-fields-submenu'}),_0xd641b['buttonView']['set']({'label':_0x595401['groupLabel']||_0x595401['groupId']}),_0xd641b['panelView']['children']['add'](_0x30ed13),_0xd641b;}function G(_0x108fd8,_0x57796d,_0x36f3b0,_0x106ad4){const _0x8a155c=new _0x14d5fc(_0x108fd8,_0x36f3b0),_0x498733=new _0x4edeaa(_0x108fd8);return _0x498733['set']({'label':_0x57796d['label']||_0x57796d['id']}),_0x8a155c['delegate']('execute')['to'](_0x36f3b0),_0x8a155c['children']['add'](_0x498733),_0x498733['bind']('isEnabled')['to'](_0x106ad4),_0x498733['on']('execute',()=>{_0x8a155c['fire']('execute',_0x57796d['id']);}),_0x8a155c;}class c extends _0x29ef2f{static get['requires'](){return[m,u];}static get['pluginName'](){return'MergeFields';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}}export{c as MergeFields,m as MergeFieldsEditing,u as MergeFieldsUI};