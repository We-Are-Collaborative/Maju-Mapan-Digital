/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x260255=_0x154c;function _0x154c(_0x4609ca,_0x162828){const _0x5cf969=_0x5cf9();return _0x154c=function(_0x154c78,_0x519f3e){_0x154c78=_0x154c78-0x1f2;let _0x13e146=_0x5cf969[_0x154c78];return _0x13e146;},_0x154c(_0x4609ca,_0x162828);}(function(_0x15bae6,_0x83be79){const _0x1ec539=_0x154c,_0x4823a2=_0x15bae6();while(!![]){try{const _0x277fb0=parseInt(_0x1ec539(0x1fc))/0x1+parseInt(_0x1ec539(0x20f))/0x2*(parseInt(_0x1ec539(0x211))/0x3)+-parseInt(_0x1ec539(0x204))/0x4*(-parseInt(_0x1ec539(0x225))/0x5)+-parseInt(_0x1ec539(0x206))/0x6*(-parseInt(_0x1ec539(0x207))/0x7)+-parseInt(_0x1ec539(0x215))/0x8*(-parseInt(_0x1ec539(0x208))/0x9)+-parseInt(_0x1ec539(0x214))/0xa+parseInt(_0x1ec539(0x210))/0xb*(-parseInt(_0x1ec539(0x21b))/0xc);if(_0x277fb0===_0x83be79)break;else _0x4823a2['push'](_0x4823a2['shift']());}catch(_0x34554c){_0x4823a2['push'](_0x4823a2['shift']());}}}(_0x5cf9,0x24f48));import{ContextPlugin as _0x3f3e93}from'ckeditor5/src/core.js';import{Collection as _0x5bbc17,CKEditorError as _0xd6d995}from'ckeditor5/src/utils.js';import _0x100ec1 from'./websocketgateway.js';import{Users as _0x4961cd}from'ckeditor5-collaboration/src/collaboration-core.js';function _0x5cf9(){const _0x1c462c=['connected','254605tyMCeA','channelConnectedUsers','fire','defineMe','sessionAdd:','clear','add','_registeredSessions','12KhUVME','assign','90906ZUxPBu','7glGRTW','254565XcoEKP','unregister','requires','getUser','sessions-unregister-not-exist','plugins','addUser','10GdqnYe','6809QhVEEd','5181CHGQOf','mySessionId','getUserBySessionId','161420xDBaZX','40iZpEDC','change:state','pluginName','isPremiumPlugin','role','state','5364fIJbsy','_uniqueUsersCount','isMe','listenTo','Sessions','orderNumber','_users','remove','_handleSessionAdd','delete','40645OXnMSP','sessionId','connection','set','sessions-register-already-registered','stopListening','_createUser','context','forEach','has','allConnectedUsers','channelSessions','getUserSessions','isOfficialPlugin','size','get','values','getUserRole','_handleSessionRemove','init','register','user'];_0x5cf9=function(){return _0x1c462c;};return _0x5cf9();}export default class i extends _0x3f3e93{[_0x260255(0x230)];[_0x260255(0x1fd)];[_0x260255(0x22f)];[_0x260255(0x203)];[_0x260255(0x21c)];[_0x260255(0x221)];static get[_0x260255(0x217)](){const _0x1e52bf=_0x260255;return _0x1e52bf(0x21f);}static get[_0x260255(0x1f2)](){return!0x0;}static get[_0x260255(0x218)](){return!0x0;}static get[_0x260255(0x20a)](){return[_0x100ec1,_0x4961cd];}constructor(_0x5c3fec){const _0x46d033=_0x260255;super(_0x5c3fec),this[_0x46d033(0x230)]=new Map(),this[_0x46d033(0x1fd)]=new Map(),this[_0x46d033(0x22f)]=new _0x5bbc17(),this[_0x46d033(0x203)]=new Map(),this[_0x46d033(0x21c)]=0x0,this[_0x46d033(0x221)]=this[_0x46d033(0x22c)][_0x46d033(0x20d)][_0x46d033(0x1f4)](_0x4961cd);}[_0x260255(0x1f8)](){const _0x51843f=_0x260255,_0x5726cc=this[_0x51843f(0x22c)][_0x51843f(0x20d)][_0x51843f(0x1f4)](_0x100ec1);this[_0x51843f(0x21e)](_0x5726cc,_0x51843f(0x216),(_0x40ea60,_0x5467fd,_0x185309)=>{const _0xdf838a=_0x51843f;if(_0xdf838a(0x1fb)!==_0x185309)this[_0xdf838a(0x230)][_0xdf838a(0x22d)](_0x60ade2=>_0x60ade2[_0xdf838a(0x201)]()),this[_0xdf838a(0x1fd)][_0xdf838a(0x22d)](_0x515690=>_0x515690[_0xdf838a(0x201)]()),this[_0xdf838a(0x22f)][_0xdf838a(0x201)]();else{for(const [_0x3e33c,_0x2fc353]of this[_0xdf838a(0x203)])for(const _0x3bd534 of _0x2fc353)this[_0xdf838a(0x223)](_0x3e33c,_0x3bd534);}}),this[_0x51843f(0x22b)](_0x5726cc[_0x51843f(0x227)]['me'],!0x0);}[_0x260255(0x1f9)](_0x4bbd08,_0x3859eb){const _0x2bc9e8=_0x260255;if(this[_0x2bc9e8(0x203)][_0x2bc9e8(0x22e)](_0x4bbd08))throw new _0xd6d995(_0x2bc9e8(0x229),null,{'channelId':_0x4bbd08});this[_0x2bc9e8(0x203)][_0x2bc9e8(0x228)](_0x4bbd08,_0x3859eb),this[_0x2bc9e8(0x230)][_0x2bc9e8(0x228)](_0x4bbd08,new _0x5bbc17()),this[_0x2bc9e8(0x1fd)][_0x2bc9e8(0x228)](_0x4bbd08,new _0x5bbc17()),this[_0x2bc9e8(0x21e)](_0x3859eb,_0x2bc9e8(0x202),(_0x5cf90f,_0x53e495)=>this[_0x2bc9e8(0x223)](_0x4bbd08,_0x53e495)),this[_0x2bc9e8(0x21e)](_0x3859eb,_0x2bc9e8(0x222),(_0x577137,_0x1e3cb4)=>this[_0x2bc9e8(0x1f7)](_0x4bbd08,_0x1e3cb4));for(const _0x3e3249 of _0x3859eb)this[_0x2bc9e8(0x223)](_0x4bbd08,_0x3e3249);}[_0x260255(0x209)](_0x1f69e2){const _0x4b5678=_0x260255;if(!this[_0x4b5678(0x203)][_0x4b5678(0x22e)](_0x1f69e2))throw new _0xd6d995(_0x4b5678(0x20c),null,{'channelId':_0x1f69e2});const _0x1ca974=this[_0x4b5678(0x203)][_0x4b5678(0x1f4)](_0x1f69e2);this[_0x4b5678(0x22a)](_0x1ca974);for(const _0x3274dd of _0x1ca974)_0x4b5678(0x1fb)===this[_0x4b5678(0x22c)][_0x4b5678(0x20d)][_0x4b5678(0x1f4)](_0x100ec1)[_0x4b5678(0x21a)]&&this[_0x4b5678(0x1f7)](_0x1f69e2,_0x3274dd);this[_0x4b5678(0x203)][_0x4b5678(0x224)](_0x1f69e2),this[_0x4b5678(0x230)][_0x4b5678(0x224)](_0x1f69e2),this[_0x4b5678(0x1fd)][_0x4b5678(0x224)](_0x1f69e2);}get[_0x260255(0x212)](){const _0x1b86bf=_0x260255;return this[_0x1b86bf(0x22c)][_0x1b86bf(0x20d)][_0x1b86bf(0x1f4)](_0x100ec1)[_0x1b86bf(0x227)][_0x1b86bf(0x226)];}[_0x260255(0x213)](_0x4cdd43){const _0x559e2d=_0x260255;for(const _0x1c924a of this[_0x559e2d(0x230)][_0x559e2d(0x1f5)]())for(const _0x26e5cd of _0x1c924a)if(_0x26e5cd['id']===_0x4cdd43)return _0x26e5cd[_0x559e2d(0x1fa)];}[_0x260255(0x231)](_0x2a71d8,_0x583bd1){const _0x3388ab=_0x260255,_0x4e73db=_0x583bd1?[this[_0x3388ab(0x230)][_0x3388ab(0x1f4)](_0x583bd1)]:this[_0x3388ab(0x230)][_0x3388ab(0x1f5)](),_0x6d1459=new Set();for(const _0x22eb20 of _0x4e73db)for(const _0x3e3d8c of _0x22eb20)_0x3e3d8c[_0x3388ab(0x1fa)]['id']===_0x2a71d8['id']&&_0x6d1459[_0x3388ab(0x202)](_0x3e3d8c['id']);return _0x6d1459;}[_0x260255(0x1f6)](_0x3b8701){const _0x593e61=_0x260255;for(const _0x173ec2 of this[_0x593e61(0x230)][_0x593e61(0x1f5)]())for(const _0x4870a3 of _0x173ec2)if(_0x4870a3[_0x593e61(0x1fa)]===_0x3b8701)return _0x4870a3[_0x593e61(0x219)];}[_0x260255(0x223)](_0x4c047d,_0x3bb0aa){const _0x37be8f=_0x260255;if(_0x37be8f(0x1fb)!==this[_0x37be8f(0x22c)][_0x37be8f(0x20d)][_0x37be8f(0x1f4)](_0x100ec1)[_0x37be8f(0x21a)])return;const _0x5d95bc=_0x3bb0aa[_0x37be8f(0x1fa)],_0x4e5c13=this[_0x37be8f(0x221)][_0x37be8f(0x20b)](_0x5d95bc['id'])||this[_0x37be8f(0x22b)](_0x5d95bc),_0x3690eb=Object[_0x37be8f(0x205)]({},_0x3bb0aa,{'user':_0x4e5c13});this[_0x37be8f(0x230)][_0x37be8f(0x1f4)](_0x4c047d)[_0x37be8f(0x202)](_0x3690eb);const _0x1640eb=this[_0x37be8f(0x1fd)][_0x37be8f(0x1f4)](_0x4c047d);_0x1640eb[_0x37be8f(0x22e)](_0x4e5c13['id'])||_0x1640eb[_0x37be8f(0x202)](_0x4e5c13),this[_0x37be8f(0x22f)][_0x37be8f(0x22e)](_0x4e5c13['id'])||this[_0x37be8f(0x22f)][_0x37be8f(0x202)](_0x4e5c13,_0x4e5c13[_0x37be8f(0x21d)]?0x0:void 0x0),this[_0x37be8f(0x1fe)](_0x37be8f(0x200)+_0x4c047d,{'channelId':_0x4c047d,'session':_0x3690eb});}[_0x260255(0x1f7)](_0x30a564,_0x20715b){const _0x43a44c=_0x260255;if(_0x43a44c(0x1fb)!==this[_0x43a44c(0x22c)][_0x43a44c(0x20d)][_0x43a44c(0x1f4)](_0x100ec1)[_0x43a44c(0x21a)])return;const _0x20a804=this[_0x43a44c(0x1fd)][_0x43a44c(0x1f4)](_0x30a564),_0x990f3=_0x20715b[_0x43a44c(0x1fa)];_0x990f3['id']&&(this[_0x43a44c(0x230)][_0x43a44c(0x1f4)](_0x30a564)[_0x43a44c(0x222)](_0x20715b['id']),_0x20a804[_0x43a44c(0x22e)](_0x990f3['id'])&&!this[_0x43a44c(0x231)](_0x990f3,_0x30a564)[_0x43a44c(0x1f3)]&&_0x20a804[_0x43a44c(0x222)](_0x990f3['id']),this[_0x43a44c(0x22f)][_0x43a44c(0x1f4)](_0x990f3['id'])&&!this[_0x43a44c(0x231)](_0x990f3)[_0x43a44c(0x1f3)]&&this[_0x43a44c(0x22f)][_0x43a44c(0x222)](_0x990f3['id']));}[_0x260255(0x22b)](_0x33f611,_0x44e567){const _0x394fb4=_0x260255,_0x4fd24e=this[_0x394fb4(0x221)][_0x394fb4(0x20e)](_0x33f611);return _0x44e567&&this[_0x394fb4(0x221)][_0x394fb4(0x1ff)](_0x33f611['id']),_0x4fd24e[_0x394fb4(0x220)]=this[_0x394fb4(0x21c)]++,_0x4fd24e;}}