/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x373152=_0x1b6c;function _0x433d(){const _0x366314=['presenceList.collapseAt','hasTooltip','change:isFocused','582dOoOOz','isVisible','indexOf','execute','_handleUserAdd','using','isMe','bind','appendChild','offsetHeight','class','pluginName','Esc','set','isExpanded','2456bxHHVT','element','presencelist:show','checkIfScrollable','[contenteditable]','usersCount','define','[tabindex]','presencelist:hide','Enter','tabIndex','pin','presenceList','_createView','get','locale','listenTo','hideDropdown','select','_handleUserRemove','view','reverse','isCollapsed','find','presencelist-missing-container','balloonPanelView','activeElement','counterView','number','369750VvKdTQ','join','presencelist-collapseat-invalid-format','context','53637jJleZi','unpin','button','remove','content','ck\x20ck-presence-list__balloon','4059QJnBpl','filter','showDropdown','items','isRendered','currentDisplayedUsers','10kIsIKs','querySelectorAll','input','100702hAoeDz','bindTo','textarea','isPremiumPlugin','add','render','2831587wVbpLq','attachToDom','_bodyCollection','Shift+Tab','focus','presenceList.displayMe','_allConnectedUsers','48217DsMZeK','focusTracker','displayMe','10380crMBVC','28VggSAx','isOfficialPlugin','length','destroy','inlineListView','requires','body','onClick','min','from','allConnectedUsers','plugins','map',':not([disabled]):not([tabindex=\x22-1\x22])','PresenceListUI','isFocusable','init','sort','offsetWidth','config','presenceDropdownView','presenceList.container','keystrokes','detachFromDom','Tab'];_0x433d=function(){return _0x366314;};return _0x433d();}(function(_0x14c84b,_0x1ef25a){const _0x1410ca=_0x1b6c,_0x5a4ad4=_0x14c84b();while(!![]){try{const _0x1896ff=-parseInt(_0x1410ca(0xe4))/0x1+-parseInt(_0x1410ca(0xc4))/0x2+-parseInt(_0x1410ca(0xc8))/0x3*(-parseInt(_0x1410ca(0xe8))/0x4)+-parseInt(_0x1410ca(0xe7))/0x5*(parseInt(_0x1410ca(0x104))/0x6)+parseInt(_0x1410ca(0xd7))/0x7+parseInt(_0x1410ca(0x113))/0x8*(parseInt(_0x1410ca(0xce))/0x9)+-parseInt(_0x1410ca(0xd4))/0xa*(-parseInt(_0x1410ca(0xdd))/0xb);if(_0x1896ff===_0x1ef25a)break;else _0x5a4ad4['push'](_0x5a4ad4['shift']());}catch(_0x226728){_0x5a4ad4['push'](_0x5a4ad4['shift']());}}}(_0x433d,0x18a55));import{ContextPlugin as _0x1a28c4}from'ckeditor5/src/core.js';import{CKEditorError as _0x3cd7c9,Collection as _0x1dfb98}from'ckeditor5/src/utils.js';import{clickOutsideHandler as _0x3af95c,BalloonPanelView as _0x38841a,BodyCollection as _0x3d46a2}from'ckeditor5/src/ui.js';import{isElement as _0x58a7c2}from'es-toolkit/compat';import _0x5cf1b7 from'../realtimecollaborativeediting/sessions.js';import _0x262a32 from'./view/presencelistview.js';import _0x37168e from'./view/presencecounterview.js';import _0x3e108d from'./view/presencedropdownlistview.js';function _0x1b6c(_0x294982,_0x25ff30){const _0x433d0d=_0x433d();return _0x1b6c=function(_0x1b6cac,_0x67f342){_0x1b6cac=_0x1b6cac-0xb5;let _0x1eb091=_0x433d0d[_0x1b6cac];return _0x1eb091;},_0x1b6c(_0x294982,_0x25ff30);}import _0xc5f8f from'./view/presencedropdownlistitemview.js';import _0x25b21b from'./view/presenceinlinelistitemview.js';const C={'collapseAt':0x6,'displayMe':!0x0};export default class r extends _0x1a28c4{[_0x373152(0xd3)];[_0x373152(0xc0)];[_0x373152(0xbb)];[_0x373152(0xfc)];[_0x373152(0xdf)]=null;static get[_0x373152(0x10f)](){const _0x4a7847=_0x373152;return _0x4a7847(0xf6);}static get[_0x373152(0xe9)](){return!0x0;}static get[_0x373152(0xda)](){return!0x0;}constructor(_0x378906){const _0x24758c=_0x373152;super(_0x378906),this[_0x24758c(0xc7)][_0x24758c(0xfb)][_0x24758c(0x119)](_0x24758c(0x11f),C);const _0x55e3bc=_0x378906[_0x24758c(0xfb)][_0x24758c(0xb5)](_0x24758c(0x101));if(_0x24758c(0xc3)!=typeof _0x55e3bc)throw new _0x3cd7c9(_0x24758c(0xc6),this);if(_0x55e3bc<0x1)throw new _0x3cd7c9(_0x24758c(0xc6),this);this[_0x24758c(0xe3)]=this[_0x24758c(0xc7)][_0x24758c(0xf3)][_0x24758c(0xb5)](_0x5cf1b7)[_0x24758c(0xf2)],this[_0x24758c(0x111)](_0x24758c(0x118),0x0),this[_0x24758c(0xd3)]=new _0x1dfb98(),this[_0x24758c(0xc0)]=new _0x38841a(),this[_0x24758c(0xc0)][_0x24758c(0x10e)]=_0x24758c(0xcd),this[_0x24758c(0xbb)]=this[_0x24758c(0x120)](),this[_0x24758c(0xfc)]=void 0x0;}static get[_0x373152(0xed)](){return[_0x5cf1b7];}[_0x373152(0xf8)](){const _0x45f627=_0x373152;for(const _0x3aac8f of this[_0x45f627(0xe3)])this[_0x45f627(0x108)](_0x3aac8f);this[_0x45f627(0xb7)](this[_0x45f627(0xe3)],_0x45f627(0xdb),(_0x34cd80,_0x498213)=>{const _0x4f5784=_0x45f627;this[_0x4f5784(0x108)](_0x498213);}),this[_0x45f627(0xb7)](this[_0x45f627(0xe3)],_0x45f627(0xcb),(_0x3f2585,_0x35e0e7)=>{const _0x912b59=_0x45f627;this[_0x912b59(0xba)](_0x35e0e7);});}[_0x373152(0x120)](){const _0x2289b4=_0x373152,_0x1af749=this[_0x2289b4(0xc7)],_0x75c801=new _0x262a32(this[_0x2289b4(0xc7)][_0x2289b4(0xb6)],this[_0x2289b4(0xc7)][_0x2289b4(0xfb)][_0x2289b4(0xb5)](_0x2289b4(0x101))),_0x3814c5=this[_0x2289b4(0xc0)];if(!_0x58a7c2(_0x1af749[_0x2289b4(0xfb)][_0x2289b4(0xb5)](_0x2289b4(0xfd))))throw new _0x3cd7c9(_0x2289b4(0xbf),this);return _0x75c801[_0x2289b4(0xc2)][_0x2289b4(0x10b)](_0x2289b4(0x118))['to'](this),_0x75c801[_0x2289b4(0x10b)](_0x2289b4(0xbd))['to'](this,_0x2289b4(0x118),_0x3f6529=>{const _0x79376d=_0x2289b4,{collapseAt:_0xe026c4}=_0x1af749[_0x79376d(0xfb)][_0x79376d(0xb5)](_0x79376d(0x11f)),_0x4629f0=_0x3f6529>=_0xe026c4;if(_0x4629f0&&!_0x75c801[_0x79376d(0xec)][_0x79376d(0xd1)][_0x79376d(0xbe)](_0x4393cd=>_0x4393cd instanceof _0x37168e)){const _0x5dcaaf=this[_0x79376d(0xc7)][_0x79376d(0xfb)][_0x79376d(0xb5)](_0x79376d(0x101))-0x1;this[_0x79376d(0xd3)][_0x79376d(0xea)]==_0x5dcaaf&&this[_0x79376d(0xd3)][_0x79376d(0xea)]>0x1&&this[_0x79376d(0xd3)][_0x79376d(0xcb)](this[_0x79376d(0xd3)][_0x79376d(0xea)]-0x1),_0x75c801[_0x79376d(0xec)][_0x79376d(0xd1)][_0x79376d(0xdb)](_0x75c801[_0x79376d(0xc2)]);}return _0x4629f0||this[_0x79376d(0xb8)](),_0x4629f0;}),_0x75c801[_0x2289b4(0xec)][_0x2289b4(0xd1)][_0x2289b4(0xd8)](this[_0x2289b4(0xd3)])[_0x2289b4(0x109)](_0x55c136=>{const _0x454eee=_0x2289b4,_0x2d7992=_0x1af749[_0x454eee(0xfb)][_0x454eee(0xb5)](_0x454eee(0x11f)),_0x1186ab=new _0x25b21b(_0x1af749[_0x454eee(0xb6)],_0x55c136,!!_0x2d7992[_0x454eee(0xef)]);return _0x1186ab[_0x454eee(0x10b)](_0x454eee(0x102))['to'](_0x75c801,_0x454eee(0xbd),_0x1af602=>!_0x1af602),_0x1186ab[_0x454eee(0x10b)](_0x454eee(0xf7))['to'](_0x75c801,_0x454eee(0xbd),_0x4debe9=>!_0x4debe9),_0x2d7992[_0x454eee(0xef)]&&this[_0x454eee(0xb7)](_0x1186ab,_0x454eee(0x107),()=>{const _0x49102b=_0x454eee;this[_0x49102b(0xbb)][_0x49102b(0xbd)]||_0x2d7992[_0x49102b(0xef)](_0x55c136,_0x1186ab[_0x49102b(0x114)]);}),_0x1186ab;}),this[_0x2289b4(0xb7)](_0x75c801[_0x2289b4(0xec)],_0x2289b4(0x115),()=>{const _0x283ac9=_0x2289b4;this[_0x283ac9(0xbb)][_0x283ac9(0xbd)]&&this[_0x283ac9(0xd0)]();}),this[_0x2289b4(0xb7)](_0x75c801[_0x2289b4(0xec)],_0x2289b4(0x11b),()=>{const _0x373016=_0x2289b4;this[_0x373016(0xfc)]&&this[_0x373016(0xb8)]();}),_0x75c801[_0x2289b4(0xec)][_0x2289b4(0xfe)][_0x2289b4(0x111)](_0x2289b4(0x11c),(_0x18e4fd,_0x279714)=>{const _0xc51973=_0x2289b4;this[_0xc51973(0xbb)][_0xc51973(0xbd)]&&(this[_0xc51973(0xd0)](),_0x279714());}),_0x75c801[_0x2289b4(0xdc)](),_0x3814c5[_0x2289b4(0xdc)](),_0x3af95c({'emitter':_0x75c801,'activator':()=>_0x3814c5[_0x2289b4(0x105)],'contextElements':[_0x3814c5[_0x2289b4(0x114)],_0x75c801[_0x2289b4(0xec)][_0x2289b4(0x114)]],'callback':()=>this[_0x2289b4(0xb8)]()}),_0x1af749[_0x2289b4(0xfb)][_0x2289b4(0xb5)](_0x2289b4(0xfd))[_0x2289b4(0x10c)](_0x75c801[_0x2289b4(0x114)]),this[_0x2289b4(0xdf)]=new _0x3d46a2(this[_0x2289b4(0xc7)][_0x2289b4(0xb6)]),this[_0x2289b4(0xdf)][_0x2289b4(0xde)](),this[_0x2289b4(0xdf)][_0x2289b4(0xdb)](this[_0x2289b4(0xc0)]),_0x75c801;}[_0x373152(0x108)](_0x3ff639){const _0x5a33af=_0x373152;if(!this[_0x5a33af(0xc7)][_0x5a33af(0xfb)][_0x5a33af(0xb5)](_0x5a33af(0xe2))&&_0x3ff639[_0x5a33af(0x10a)])return;const _0x4512f7=this[_0x5a33af(0xc7)][_0x5a33af(0xfb)][_0x5a33af(0xb5)](_0x5a33af(0x101))-0x1;for(this[_0x5a33af(0x118)]++;this[_0x5a33af(0xd3)][_0x5a33af(0xea)]>=_0x4512f7-(this[_0x5a33af(0xbb)][_0x5a33af(0xbd)]?0x1:0x0)&&this[_0x5a33af(0xd3)][_0x5a33af(0xea)]>0x1;)this[_0x5a33af(0xd3)][_0x5a33af(0xcb)](0x1);const _0x1a8649=_0x3ff639[_0x5a33af(0x10a)]?0x0:this[_0x5a33af(0xd3)][_0x5a33af(0xea)];this[_0x5a33af(0xd3)][_0x5a33af(0xdb)](_0x3ff639,_0x1a8649);}[_0x373152(0xba)](_0x4a632f){const _0x349d20=_0x373152;this[_0x349d20(0x118)]--;const {collapseAt:_0x5a97f4}=this[_0x349d20(0xc7)][_0x349d20(0xfb)][_0x349d20(0xb5)](_0x349d20(0x11f)),_0x2ece48=this[_0x349d20(0x118)]>=_0x5a97f4;if(this[_0x349d20(0xd3)][_0x349d20(0xb5)](_0x4a632f['id']))this[_0x349d20(0xd3)][_0x349d20(0xcb)](_0x4a632f['id']);else{if(_0x2ece48&&this[_0x349d20(0xd3)][_0x349d20(0xea)]+0x1===_0x5a97f4-0x1)return;}if(this[_0x349d20(0xd3)][_0x349d20(0xea)]+(_0x2ece48?0x1:0x0)<this[_0x349d20(0x118)]){for(const _0x215efc of Array[_0x349d20(0xf1)](this[_0x349d20(0xe3)])[_0x349d20(0xbc)]())if(!this[_0x349d20(0xd3)][_0x349d20(0xb5)](_0x215efc['id'])&&(this[_0x349d20(0xd3)][_0x349d20(0xdb)](_0x215efc,Math[_0x349d20(0xf0)](this[_0x349d20(0xd3)][_0x349d20(0xea)]-(_0x2ece48?0x1:0x0),0x1)),this[_0x349d20(0xd3)][_0x349d20(0xea)]+(_0x2ece48?0x1:0x0)===_0x5a97f4-0x1))return;}}[_0x373152(0xd0)](){const _0x5e76dd=_0x373152;if(this[_0x5e76dd(0xfc)])return;const _0x74fed7=this[_0x5e76dd(0xc7)][_0x5e76dd(0xfb)][_0x5e76dd(0xb5)](_0x5e76dd(0x11f));this[_0x5e76dd(0xfc)]=new _0x3e108d(this[_0x5e76dd(0xc7)][_0x5e76dd(0xb6)],!!_0x74fed7[_0x5e76dd(0xef)]),this[_0x5e76dd(0xbb)][_0x5e76dd(0xec)][_0x5e76dd(0x112)]=!0x0,this[_0x5e76dd(0xb7)](this[_0x5e76dd(0xfc)],_0x5e76dd(0x11b),()=>{const _0x15d55c=_0x5e76dd;this[_0x15d55c(0xfc)]&&this[_0x15d55c(0xb8)]();});const {listWrapperView:_0x3e6445}=this[_0x5e76dd(0xfc)];_0x3e6445[_0x5e76dd(0xd1)][_0x5e76dd(0xd8)](this[_0x5e76dd(0xe3)])[_0x5e76dd(0x109)](_0x1a08ac=>{const _0x226305=_0x5e76dd;if(!_0x74fed7[_0x226305(0xe6)]&&_0x1a08ac[_0x226305(0x10a)])return null;const _0x36b038=new _0xc5f8f(this[_0x226305(0xc7)][_0x226305(0xb6)],_0x1a08ac,!!_0x74fed7[_0x226305(0xef)]);return _0x74fed7[_0x226305(0xef)]&&this[_0x226305(0xb7)](_0x36b038,_0x226305(0x107),()=>{const _0x54662c=_0x226305;_0x74fed7[_0x54662c(0xef)](_0x1a08ac,_0x36b038[_0x54662c(0x114)]);}),_0x36b038;}),this[_0x5e76dd(0xc0)][_0x5e76dd(0xcc)][_0x5e76dd(0xdb)](this[_0x5e76dd(0xfc)]),this[_0x5e76dd(0xc0)][_0x5e76dd(0x11e)]({'target':this[_0x5e76dd(0xbb)][_0x5e76dd(0xec)][_0x5e76dd(0x114)]}),_0x3e6445[_0x5e76dd(0xe1)](),_0x3e6445[_0x5e76dd(0x116)]();const _0x42cc8e=(_0x40435c,_0x1031a1)=>{const _0xc2a3c1=_0x5e76dd;this[_0xc2a3c1(0xb8)](),this[_0xc2a3c1(0xbb)][_0xc2a3c1(0xec)][_0xc2a3c1(0xe1)](),_0x1031a1();};_0x3e6445[_0x5e76dd(0xfe)][_0x5e76dd(0x111)](_0x5e76dd(0x110),_0x42cc8e),_0x3e6445[_0x5e76dd(0xfe)][_0x5e76dd(0x111)](_0x5e76dd(0xe0),_0x42cc8e),_0x3e6445[_0x5e76dd(0xfe)][_0x5e76dd(0x111)](_0x5e76dd(0x100),(_0x4f2115,_0x432812)=>{const _0x22be2a=_0x5e76dd;!function(_0x16000a){const _0x3876c9=_0x1b6c,_0x2dd3a3=['a',_0x3876c9(0xca),_0x3876c9(0xd6),_0x3876c9(0xb9),_0x3876c9(0xd9),_0x3876c9(0x11a),_0x3876c9(0x117)][_0x3876c9(0xf4)](_0x14aeb3=>_0x14aeb3+_0x3876c9(0xf5))[_0x3876c9(0xc5)](','),_0x5870a1=[...document[_0x3876c9(0xee)][_0x3876c9(0xd5)](_0x2dd3a3)][_0x3876c9(0xcf)](_0x2360b9=>_0x2360b9===document[_0x3876c9(0xc1)]||_0x2360b9[_0x3876c9(0xfa)]+_0x2360b9[_0x3876c9(0x10d)]>0x0)[_0x3876c9(0xf9)]((_0x40ea6b,_0x13114a)=>(_0x40ea6b[_0x3876c9(0x11d)]||0x0)-(_0x13114a[_0x3876c9(0x11d)]||0x0)),_0x5c4a95=_0x5870a1[_0x3876c9(0x106)](_0x16000a),_0x40079e=_0x5870a1[(_0x5c4a95+0x1)%_0x5870a1[_0x3876c9(0xea)]];_0x40079e&&_0x40079e[_0x3876c9(0xe1)]();}(this[_0x22be2a(0xbb)][_0x22be2a(0x114)]),this[_0x22be2a(0xb8)](),_0x432812();}),_0x3e6445[_0x5e76dd(0xe5)][_0x5e76dd(0xdb)](this[_0x5e76dd(0xbb)][_0x5e76dd(0x114)]),_0x3e6445[_0x5e76dd(0xe5)]['on'](_0x5e76dd(0x103),(_0x4ef731,_0x129f85,_0xe345ac)=>{const _0x2adb7c=_0x5e76dd;_0xe345ac||this[_0x2adb7c(0xb8)]();});}[_0x373152(0xb8)](){const _0x7427fb=_0x373152;this[_0x7427fb(0xfc)]&&(this[_0x7427fb(0xbb)][_0x7427fb(0xec)][_0x7427fb(0x112)]=!0x1,this[_0x7427fb(0xc0)][_0x7427fb(0xc9)](),this[_0x7427fb(0xc0)][_0x7427fb(0xcc)][_0x7427fb(0xcb)](this[_0x7427fb(0xfc)]),this[_0x7427fb(0xfc)][_0x7427fb(0xeb)](),this[_0x7427fb(0xfc)]=void 0x0);}[_0x373152(0xeb)](){const _0x5dbe5b=_0x373152;super[_0x5dbe5b(0xeb)](),this[_0x5dbe5b(0xbb)]&&this[_0x5dbe5b(0xbb)][_0x5dbe5b(0xd2)]&&this[_0x5dbe5b(0xbb)][_0x5dbe5b(0xeb)](),this[_0x5dbe5b(0xdf)]&&(this[_0x5dbe5b(0xdf)][_0x5dbe5b(0xff)](),this[_0x5dbe5b(0xdf)][_0x5dbe5b(0xeb)](),this[_0x5dbe5b(0xdf)]=null);}}