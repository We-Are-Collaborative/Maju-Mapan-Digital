/*
 *             Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x19c8d2=_0x47fa;(function(_0x4e1684,_0x256ef8){const _0x19076d=_0x47fa,_0x36dcc2=_0x4e1684();while(!![]){try{const _0x45f6da=parseInt(_0x19076d(0x236))/0x1+parseInt(_0x19076d(0x22a))/0x2*(parseInt(_0x19076d(0x1fb))/0x3)+-parseInt(_0x19076d(0x1f3))/0x4+-parseInt(_0x19076d(0x241))/0x5*(parseInt(_0x19076d(0x21f))/0x6)+-parseInt(_0x19076d(0x200))/0x7*(parseInt(_0x19076d(0x23d))/0x8)+-parseInt(_0x19076d(0x238))/0x9+parseInt(_0x19076d(0x20e))/0xa*(parseInt(_0x19076d(0x246))/0xb);if(_0x45f6da===_0x256ef8)break;else _0x36dcc2['push'](_0x36dcc2['shift']());}catch(_0x4c95e1){_0x36dcc2['push'](_0x36dcc2['shift']());}}}(_0x5e40,0x6d1d9));import{ObservableMixin as _0x5d4b00}from'ckeditor5/src/utils.js';function _0x5e40(){const _0x287e01=['element','mainAction','nodeType','1966803yYHMvB','tryAgainEvent','listenTo','setContentOf','_stripMarkdownSyntax','101017oZYAxV','reverse','body','submitPrompt','createElement','_parseAndNormalizeContent','_xmlSerializer','match','isProcessing','querySelector','clear','currentContext','previousQuery','stringify','54400aVBiJB','render','serializeToString','abort','config','finally','prompt','set:currentContext','remove','initialContext','name','toModel','<h1></h1>','catch','destroy','handleError','childNodes','54XtKZEM','set','endsWith','toView','view','previousLabel','text/html','ai.aiAssistant.preserveComments','exec','once','_sanitizationContainer','2BqAoiZ','innerHTML','_isH1TagSupportEnabled','editor','data','finishProcessing','custom','trim','markers','from','then','_handleQuery','714893TmkbnS','parseFromString','1051803zSEQwo','```html','stopProcessing','div','message','296VflZwR','domConverter','value','updateView','244985bcJDBv','makeRequest','document','rename','processor','627BQgvlF','isRendered','```','viewToDom','ELEMENT_NODE','length','_domParser','_sanitizeHTML','editing','previousContext','stopListening','previousActionId','currentResponse','htmlProcessor','reset','textAdapter','startsWith','get','567400rqelxE','startProcessing','push','_normalizeResponseHeadings','substring'];_0x5e40=function(){return _0x287e01;};return _0x5e40();}import{AIRequestError as _0x1b175a}from'../adapters/aiadapter.js';import{Matcher as _0x127cfd,UpcastWriter as _0x5a34ad}from'ckeditor5/src/engine.js';const Z=new RegExp(/^(.*?)<[a-zA-Z][a-zA-Z0-9_\-.]*[ >]/,'is');function _0x47fa(_0x4c105f,_0x3e3622){const _0x5e4038=_0x5e40();return _0x47fa=function(_0x47fa52,_0x14dd8b){_0x47fa52=_0x47fa52-0x1f3;let _0x1c8c6b=_0x5e4038[_0x47fa52];return _0x1c8c6b;},_0x47fa(_0x4c105f,_0x3e3622);}export default class k extends/* #__PURE__ -- @preserve */
_0x5d4b00(){[_0x19c8d2(0x22d)];[_0x19c8d2(0x255)];[_0x19c8d2(0x223)];[_0x19c8d2(0x229)];[_0x19c8d2(0x24c)];[_0x19c8d2(0x206)];constructor(_0x4393d6,_0x2a42c6,_0x3868a8){const _0x51359b=_0x19c8d2;super(),this[_0x51359b(0x22d)]=_0x4393d6,this[_0x51359b(0x255)]=_0x2a42c6,this[_0x51359b(0x229)]=document[_0x51359b(0x204)](_0x51359b(0x23b)),this[_0x51359b(0x24c)]=new DOMParser(),this[_0x51359b(0x206)]=new XMLSerializer(),this[_0x51359b(0x223)]=_0x3868a8,this[_0x51359b(0x220)]({'initialContext':'','currentContext':'','currentResponse':'','previousContext':void 0x0,'previousQuery':void 0x0,'previousLabel':void 0x0,'isProcessing':!0x1}),this['on'](_0x51359b(0x215),(_0x5b36c0,_0xca51e1,_0x825532)=>{const _0x1b258f=_0x51359b;this[_0x1b258f(0x223)][_0x1b258f(0x23f)]=this[_0x1b258f(0x24d)](_0x825532);}),this[_0x51359b(0x1fd)](this[_0x51359b(0x223)],_0x51359b(0x203),(_0x849fa4,_0x3f9e26)=>{const _0x270582=_0x51359b,_0x22ea0c=this[_0x270582(0x20b)]||this[_0x270582(0x217)];this[_0x270582(0x235)](_0x3f9e26,_0x22ea0c,_0x270582(0x230));}),this[_0x51359b(0x1fd)](this[_0x51359b(0x223)],_0x51359b(0x1fc),()=>{const _0x11dfed=_0x51359b;this[_0x11dfed(0x223)][_0x11dfed(0x214)]=this[_0x11dfed(0x224)],this[_0x11dfed(0x235)](this[_0x11dfed(0x20c)],this[_0x11dfed(0x24f)],this[_0x11dfed(0x251)],this[_0x11dfed(0x224)]);}),this[_0x51359b(0x1fd)](this[_0x51359b(0x223)],_0x51359b(0x23a),()=>{const _0x29124d=_0x51359b;this[_0x29124d(0x23a)]();});}[_0x19c8d2(0x21c)](){const _0x1bb367=_0x19c8d2;this[_0x1bb367(0x250)]();}async[_0x19c8d2(0x240)]({actionId:_0x2ad9a5,query:_0x329b09,htmlContent:_0x355242,label:_0x1fe499,mainActionLabel:_0x3a7ee4}){const _0x1e4145=_0x19c8d2;this[_0x1e4145(0x223)][_0x1e4145(0x214)]=_0x1fe499,this[_0x1e4145(0x223)][_0x1e4145(0x1f9)]=_0x3a7ee4,this[_0x1e4145(0x217)]=_0x355242,_0x329b09&&(this[_0x1e4145(0x223)][_0x1e4145(0x247)]?this[_0x1e4145(0x235)](_0x329b09,_0x355242,_0x2ad9a5,_0x1fe499):this[_0x1e4145(0x223)][_0x1e4145(0x228)](_0x1e4145(0x20f),()=>{const _0x2ccd36=_0x1e4145;this[_0x2ccd36(0x235)](_0x329b09,_0x355242,_0x2ad9a5,_0x1fe499);}));}[_0x19c8d2(0x23a)](){const _0xa4ad08=_0x19c8d2;this[_0xa4ad08(0x208)]&&(this[_0xa4ad08(0x208)]=!0x1,this[_0xa4ad08(0x223)][_0xa4ad08(0x22f)](),this[_0xa4ad08(0x255)][_0xa4ad08(0x211)]());}[_0x19c8d2(0x254)](){const _0x337a10=_0x19c8d2;this[_0x337a10(0x217)]='',this[_0x337a10(0x20b)]='',this[_0x337a10(0x252)]='',this[_0x337a10(0x24f)]='',this[_0x337a10(0x20c)]='',this[_0x337a10(0x224)]='',this[_0x337a10(0x251)]=void 0x0,this[_0x337a10(0x223)][_0x337a10(0x254)](),this[_0x337a10(0x23a)]();}async[_0x19c8d2(0x235)](_0x1864f3,_0x3f0138,_0x46a067,_0x6907b5){const _0x49462c=_0x19c8d2;return this[_0x49462c(0x208)]=!0x0,this[_0x49462c(0x223)][_0x49462c(0x1f4)](),this[_0x49462c(0x24f)]=_0x3f0138,this[_0x49462c(0x20c)]=_0x1864f3,this[_0x49462c(0x224)]=_0x6907b5||_0x1864f3,this[_0x49462c(0x251)]=_0x46a067,new Promise(_0x1baf9d=>{const _0x15b124=_0x49462c;this[_0x15b124(0x255)][_0x15b124(0x242)]({'query':_0x1864f3,'context':_0x3f0138,'onData':_0x1fb715=>{const _0x2de120=_0x15b124;this[_0x2de120(0x252)]=_0x1fb715,this[_0x2de120(0x20b)]=this[_0x2de120(0x205)](this[_0x2de120(0x252)]);},'actionId':_0x46a067})[_0x15b124(0x234)](()=>{const _0x4de374=_0x15b124;!this[_0x4de374(0x20b)]&&this[_0x4de374(0x252)]&&(this[_0x4de374(0x20b)]=this[_0x4de374(0x205)](this[_0x4de374(0x252)],!0x0));})[_0x15b124(0x21b)](_0x591dbc=>{const _0x4e3833=_0x15b124;_0x591dbc instanceof _0x1b175a?this[_0x4e3833(0x223)][_0x4e3833(0x21d)](_0x591dbc[_0x4e3833(0x23c)]):this[_0x4e3833(0x223)][_0x4e3833(0x21d)](),_0x1baf9d();})[_0x15b124(0x213)](()=>{const _0xbcb53d=_0x15b124;this[_0xbcb53d(0x23a)](),_0x1baf9d();});});}[_0x19c8d2(0x205)](_0x2bd6fe,_0x4f41eb=!0x1){const _0x3c9ab2=_0x19c8d2,_0x1d7706=Z[_0x3c9ab2(0x227)](_0x2bd6fe);_0x2bd6fe=_0x1d7706?_0x2bd6fe[_0x3c9ab2(0x1f7)](_0x1d7706[0x1][_0x3c9ab2(0x24b)]):_0x2bd6fe[_0x3c9ab2(0x24b)]<0x64&&!_0x4f41eb?'':this[_0x3c9ab2(0x1ff)](_0x2bd6fe);const _0x13b401=this[_0x3c9ab2(0x24c)][_0x3c9ab2(0x237)](_0x2bd6fe,_0x3c9ab2(0x225));if(_0x1d7706){const _0x36e990=Array[_0x3c9ab2(0x233)](_0x13b401[_0x3c9ab2(0x202)][_0x3c9ab2(0x21e)]);_0x36e990[_0x3c9ab2(0x201)]();for(const _0x103db3 of _0x36e990){if(_0x103db3[_0x3c9ab2(0x1fa)]==Node[_0x3c9ab2(0x24a)])break;_0x103db3[_0x3c9ab2(0x216)]();}}const _0x5599b2=this[_0x3c9ab2(0x22d)][_0x3c9ab2(0x22e)][_0x3c9ab2(0x245)][_0x3c9ab2(0x222)](this[_0x3c9ab2(0x206)][_0x3c9ab2(0x210)](_0x13b401[_0x3c9ab2(0x202)]));this[_0x3c9ab2(0x22c)]()||this[_0x3c9ab2(0x1f6)](_0x5599b2);const _0x40672c=this[_0x3c9ab2(0x22d)][_0x3c9ab2(0x212)][_0x3c9ab2(0x257)](_0x3c9ab2(0x226)),_0xfdb748=this[_0x3c9ab2(0x22d)][_0x3c9ab2(0x22e)][_0x3c9ab2(0x219)](_0x5599b2);return _0x40672c||_0xfdb748[_0x3c9ab2(0x232)][_0x3c9ab2(0x20a)](),this[_0x3c9ab2(0x22d)][_0x3c9ab2(0x22e)][_0x3c9ab2(0x20d)](_0xfdb748);}[_0x19c8d2(0x1f6)](_0x1799aa){const _0x530120=_0x19c8d2,_0x2dff44=new _0x5a34ad(this[_0x530120(0x22d)][_0x530120(0x24e)][_0x530120(0x223)][_0x530120(0x243)]),_0x58f730=new _0x127cfd({'name':/^h[1-5]$/}),_0x52bb20=[];let _0x51e839=!0x1;for(const _0x375b79 of _0x1799aa)_0x375b79['is'](_0x530120(0x1f8))&&_0x58f730[_0x530120(0x207)](_0x375b79)&&(_0x52bb20[_0x530120(0x1f5)](_0x375b79),'h1'==_0x375b79[_0x530120(0x218)]&&(_0x51e839=!0x0));if(_0x51e839){for(const _0x5f341a of _0x52bb20)_0x2dff44[_0x530120(0x244)]('h'+(parseInt(_0x5f341a[_0x530120(0x218)][0x1])+0x1),_0x5f341a);}}[_0x19c8d2(0x22c)](){const _0x4d6b4c=_0x19c8d2,{data:_0x4f07c0,editing:_0x40e17e}=this[_0x4d6b4c(0x22d)],_0x4bbfed=_0x4f07c0[_0x4d6b4c(0x253)][_0x4d6b4c(0x222)](_0x4d6b4c(0x21a)),_0xa9b35a=_0x4f07c0[_0x4d6b4c(0x222)](_0x4f07c0[_0x4d6b4c(0x219)](_0x4bbfed));return!!_0x40e17e[_0x4d6b4c(0x223)][_0x4d6b4c(0x23e)][_0x4d6b4c(0x249)](_0xa9b35a)[_0x4d6b4c(0x209)]('h1');}[_0x19c8d2(0x24d)](_0x15acac){const _0x387691=_0x19c8d2;return this[_0x387691(0x22d)][_0x387691(0x24e)][_0x387691(0x223)][_0x387691(0x23e)][_0x387691(0x1fe)](this[_0x387691(0x229)],_0x15acac),this[_0x387691(0x229)][_0x387691(0x22b)];}[_0x19c8d2(0x1ff)](_0xf4023d){const _0x1fe3e5=_0x19c8d2,_0x41dbc0=_0xf4023d[_0x1fe3e5(0x231)]();return _0x41dbc0[_0x1fe3e5(0x256)](_0x1fe3e5(0x239))?_0x41dbc0[_0x1fe3e5(0x221)](_0x1fe3e5(0x248))?_0x41dbc0[_0x1fe3e5(0x1f7)](0x7,_0x41dbc0[_0x1fe3e5(0x24b)]-0x3):_0x41dbc0[_0x1fe3e5(0x1f7)](0x7):_0xf4023d;}}